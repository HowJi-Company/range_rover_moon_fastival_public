(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ro(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const se={},Dt=[],Xe=()=>{},ns=()=>!1,Mn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),io=e=>e.startsWith("onUpdate:"),Te=Object.assign,lo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ir=Object.prototype.hasOwnProperty,te=(e,t)=>ir.call(e,t),H=Array.isArray,Rt=e=>Tn(e)==="[object Map]",os=e=>Tn(e)==="[object Set]",z=e=>typeof e=="function",me=e=>typeof e=="string",gt=e=>typeof e=="symbol",ce=e=>e!==null&&typeof e=="object",ss=e=>(ce(e)||z(e))&&z(e.then)&&z(e.catch),rs=Object.prototype.toString,Tn=e=>rs.call(e),lr=e=>Tn(e).slice(8,-1),is=e=>Tn(e)==="[object Object]",ao=e=>me(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wt=ro(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),On=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ar=/-\w/g,Be=On(e=>e.replace(ar,t=>t.slice(1).toUpperCase())),cr=/\B([A-Z])/g,mt=On(e=>e.replace(cr,"-$1").toLowerCase()),kn=On(e=>e.charAt(0).toUpperCase()+e.slice(1)),jn=On(e=>e?`on${kn(e)}`:""),pt=(e,t)=>!Object.is(e,t),dn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ls=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Yn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let So;const In=()=>So||(So=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xt(e){if(H(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],s=me(o)?pr(o):xt(o);if(s)for(const r in s)t[r]=s[r]}return t}else if(me(e)||ce(e))return e}const ur=/;(?![^(]*\))/g,fr=/:([^]+)/,dr=/\/\*[^]*?\*\//g;function pr(e){const t={};return e.replace(dr,"").split(ur).forEach(n=>{if(n){const o=n.split(fr);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function jt(e){let t="";if(me(e))t=e;else if(H(e))for(let n=0;n<e.length;n++){const o=jt(e[n]);o&&(t+=o+" ")}else if(ce(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const hr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gr=ro(hr);function as(e){return!!e||e===""}const cs=e=>!!(e&&e.__v_isRef===!0),ye=e=>me(e)?e:e==null?"":H(e)||ce(e)&&(e.toString===rs||!z(e.toString))?cs(e)?ye(e.value):JSON.stringify(e,us,2):String(e),us=(e,t)=>cs(t)?us(e,t.value):Rt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,s],r)=>(n[Nn(o,r)+" =>"]=s,n),{})}:os(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Nn(n))}:gt(t)?Nn(t):ce(t)&&!H(t)&&!is(t)?String(t):t,Nn=(e,t="")=>{var n;return gt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ie;class mr{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ie,!t&&Ie&&(this.index=(Ie.scopes||(Ie.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ie;try{return Ie=this,t()}finally{Ie=n}}}on(){++this._on===1&&(this.prevScope=Ie,Ie=this)}off(){this._on>0&&--this._on===0&&(Ie=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function vr(){return Ie}let ie;const Bn=new WeakSet;class fs{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ie&&Ie.active&&Ie.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bn.has(this)&&(Bn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ps(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Po(this),hs(this);const t=ie,n=Ke;ie=this,Ke=!0;try{return this.fn()}finally{gs(this),ie=t,Ke=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fo(t);this.deps=this.depsTail=void 0,Po(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gn(this)&&this.run()}get dirty(){return Gn(this)}}let ds=0,Kt,qt;function ps(e,t=!1){if(e.flags|=8,t){e.next=qt,qt=e;return}e.next=Kt,Kt=e}function co(){ds++}function uo(){if(--ds>0)return;if(qt){let t=qt;for(qt=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Kt;){let t=Kt;for(Kt=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function hs(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gs(e){let t,n=e.depsTail,o=n;for(;o;){const s=o.prevDep;o.version===-1?(o===n&&(n=s),fo(o),br(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=t,e.depsTail=n}function Gn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ms(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ms(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qt)||(e.globalVersion=Qt,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Gn(e))))return;e.flags|=2;const t=e.dep,n=ie,o=Ke;ie=e,Ke=!0;try{hs(e);const s=e.fn(e._value);(t.version===0||pt(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ie=n,Ke=o,gs(e),e.flags&=-3}}function fo(e,t=!1){const{dep:n,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)fo(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function br(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ke=!0;const vs=[];function lt(){vs.push(Ke),Ke=!1}function at(){const e=vs.pop();Ke=e===void 0?!0:e}function Po(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ie;ie=void 0;try{t()}finally{ie=n}}}let Qt=0;class wr{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class po{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ie||!Ke||ie===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ie)n=this.activeLink=new wr(ie,this),ie.deps?(n.prevDep=ie.depsTail,ie.depsTail.nextDep=n,ie.depsTail=n):ie.deps=ie.depsTail=n,bs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=ie.depsTail,n.nextDep=void 0,ie.depsTail.nextDep=n,ie.depsTail=n,ie.deps===n&&(ie.deps=o)}return n}trigger(t){this.version++,Qt++,this.notify(t)}notify(t){co();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{uo()}}}function bs(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)bs(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const bn=new WeakMap,Ct=Symbol(""),Jn=Symbol(""),en=Symbol("");function _e(e,t,n){if(Ke&&ie){let o=bn.get(e);o||bn.set(e,o=new Map);let s=o.get(n);s||(o.set(n,s=new po),s.map=o,s.key=n),s.track()}}function rt(e,t,n,o,s,r){const i=bn.get(e);if(!i){Qt++;return}const a=u=>{u&&u.trigger()};if(co(),t==="clear")i.forEach(a);else{const u=H(e),h=u&&ao(n);if(u&&n==="length"){const f=Number(o);i.forEach((g,y)=>{(y==="length"||y===en||!gt(y)&&y>=f)&&a(g)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),h&&a(i.get(en)),t){case"add":u?h&&a(i.get("length")):(a(i.get(Ct)),Rt(e)&&a(i.get(Jn)));break;case"delete":u||(a(i.get(Ct)),Rt(e)&&a(i.get(Jn)));break;case"set":Rt(e)&&a(i.get(Ct));break}}uo()}function yr(e,t){const n=bn.get(e);return n&&n.get(t)}function Ot(e){const t=Z(e);return t===e?t:(_e(t,"iterate",en),qe(e)?t:t.map(Ee))}function ho(e){return _e(e=Z(e),"iterate",en),e}const _r={__proto__:null,[Symbol.iterator](){return Vn(this,Symbol.iterator,Ee)},concat(...e){return Ot(this).concat(...e.map(t=>H(t)?Ot(t):t))},entries(){return Vn(this,"entries",e=>(e[1]=Ee(e[1]),e))},every(e,t){return tt(this,"every",e,t,void 0,arguments)},filter(e,t){return tt(this,"filter",e,t,n=>n.map(Ee),arguments)},find(e,t){return tt(this,"find",e,t,Ee,arguments)},findIndex(e,t){return tt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return tt(this,"findLast",e,t,Ee,arguments)},findLastIndex(e,t){return tt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return tt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hn(this,"includes",e)},indexOf(...e){return Hn(this,"indexOf",e)},join(e){return Ot(this).join(e)},lastIndexOf(...e){return Hn(this,"lastIndexOf",e)},map(e,t){return tt(this,"map",e,t,void 0,arguments)},pop(){return Vt(this,"pop")},push(...e){return Vt(this,"push",e)},reduce(e,...t){return Eo(this,"reduce",e,t)},reduceRight(e,...t){return Eo(this,"reduceRight",e,t)},shift(){return Vt(this,"shift")},some(e,t){return tt(this,"some",e,t,void 0,arguments)},splice(...e){return Vt(this,"splice",e)},toReversed(){return Ot(this).toReversed()},toSorted(e){return Ot(this).toSorted(e)},toSpliced(...e){return Ot(this).toSpliced(...e)},unshift(...e){return Vt(this,"unshift",e)},values(){return Vn(this,"values",Ee)}};function Vn(e,t,n){const o=ho(e),s=o[t]();return o!==e&&!qe(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const xr=Array.prototype;function tt(e,t,n,o,s,r){const i=ho(e),a=i!==e&&!qe(e),u=i[t];if(u!==xr[t]){const g=u.apply(e,r);return a?Ee(g):g}let h=n;i!==e&&(a?h=function(g,y){return n.call(this,Ee(g),y,e)}:n.length>2&&(h=function(g,y){return n.call(this,g,y,e)}));const f=u.call(i,h,o);return a&&s?s(f):f}function Eo(e,t,n,o){const s=ho(e);let r=n;return s!==e&&(qe(e)?n.length>3&&(r=function(i,a,u){return n.call(this,i,a,u,e)}):r=function(i,a,u){return n.call(this,i,Ee(a),u,e)}),s[t](r,...o)}function Hn(e,t,n){const o=Z(e);_e(o,"iterate",en);const s=o[t](...n);return(s===-1||s===!1)&&bo(n[0])?(n[0]=Z(n[0]),o[t](...n)):s}function Vt(e,t,n=[]){lt(),co();const o=Z(e)[t].apply(e,n);return uo(),at(),o}const Cr=ro("__proto__,__v_isRef,__isVue"),ws=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(gt));function Sr(e){gt(e)||(e=String(e));const t=Z(this);return _e(t,"has",e),t.hasOwnProperty(e)}class ys{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(s?r?Rr:Ss:r?Cs:xs).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=H(t);if(!s){let u;if(i&&(u=_r[n]))return u;if(n==="hasOwnProperty")return Sr}const a=Reflect.get(t,n,be(t)?t:o);return(gt(n)?ws.has(n):Cr(n))||(s||_e(t,"get",n),r)?a:be(a)?i&&ao(n)?a:a.value:ce(a)?s?Ps(a):mo(a):a}}class _s extends ys{constructor(t=!1){super(!1,t)}set(t,n,o,s){let r=t[n];if(!this._isShallow){const u=St(r);if(!qe(o)&&!St(o)&&(r=Z(r),o=Z(o)),!H(t)&&be(r)&&!be(o))return u||(r.value=o),!0}const i=H(t)&&ao(n)?Number(n)<t.length:te(t,n),a=Reflect.set(t,n,o,be(t)?t:s);return t===Z(s)&&(i?pt(o,r)&&rt(t,"set",n,o):rt(t,"add",n,o)),a}deleteProperty(t,n){const o=te(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&o&&rt(t,"delete",n,void 0),s}has(t,n){const o=Reflect.has(t,n);return(!gt(n)||!ws.has(n))&&_e(t,"has",n),o}ownKeys(t){return _e(t,"iterate",H(t)?"length":Ct),Reflect.ownKeys(t)}}class Pr extends ys{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Er=new _s,Mr=new Pr,Tr=new _s(!0);const Xn=e=>e,cn=e=>Reflect.getPrototypeOf(e);function Or(e,t,n){return function(...o){const s=this.__v_raw,r=Z(s),i=Rt(r),a=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,h=s[e](...o),f=n?Xn:t?Zn:Ee;return!t&&_e(r,"iterate",u?Jn:Ct),{next(){const{value:g,done:y}=h.next();return y?{value:g,done:y}:{value:a?[f(g[0]),f(g[1])]:f(g),done:y}},[Symbol.iterator](){return this}}}}function un(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kr(e,t){const n={get(s){const r=this.__v_raw,i=Z(r),a=Z(s);e||(pt(s,a)&&_e(i,"get",s),_e(i,"get",a));const{has:u}=cn(i),h=t?Xn:e?Zn:Ee;if(u.call(i,s))return h(r.get(s));if(u.call(i,a))return h(r.get(a));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!e&&_e(Z(s),"iterate",Ct),s.size},has(s){const r=this.__v_raw,i=Z(r),a=Z(s);return e||(pt(s,a)&&_e(i,"has",s),_e(i,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const i=this,a=i.__v_raw,u=Z(a),h=t?Xn:e?Zn:Ee;return!e&&_e(u,"iterate",Ct),a.forEach((f,g)=>s.call(r,h(f),h(g),i))}};return Te(n,e?{add:un("add"),set:un("set"),delete:un("delete"),clear:un("clear")}:{add(s){!t&&!qe(s)&&!St(s)&&(s=Z(s));const r=Z(this);return cn(r).has.call(r,s)||(r.add(s),rt(r,"add",s,s)),this},set(s,r){!t&&!qe(r)&&!St(r)&&(r=Z(r));const i=Z(this),{has:a,get:u}=cn(i);let h=a.call(i,s);h||(s=Z(s),h=a.call(i,s));const f=u.call(i,s);return i.set(s,r),h?pt(r,f)&&rt(i,"set",s,r):rt(i,"add",s,r),this},delete(s){const r=Z(this),{has:i,get:a}=cn(r);let u=i.call(r,s);u||(s=Z(s),u=i.call(r,s)),a&&a.call(r,s);const h=r.delete(s);return u&&rt(r,"delete",s,void 0),h},clear(){const s=Z(this),r=s.size!==0,i=s.clear();return r&&rt(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Or(s,e,t)}),n}function go(e,t){const n=kr(e,t);return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(te(n,s)&&s in o?n:o,s,r)}const Ir={get:go(!1,!1)},Ar={get:go(!1,!0)},Dr={get:go(!0,!1)};const xs=new WeakMap,Cs=new WeakMap,Ss=new WeakMap,Rr=new WeakMap;function Fr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lr(e){return e.__v_skip||!Object.isExtensible(e)?0:Fr(lr(e))}function mo(e){return St(e)?e:vo(e,!1,Er,Ir,xs)}function $r(e){return vo(e,!1,Tr,Ar,Cs)}function Ps(e){return vo(e,!0,Mr,Dr,Ss)}function vo(e,t,n,o,s){if(!ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Lr(e);if(r===0)return e;const i=s.get(e);if(i)return i;const a=new Proxy(e,r===2?o:n);return s.set(e,a),a}function Yt(e){return St(e)?Yt(e.__v_raw):!!(e&&e.__v_isReactive)}function St(e){return!!(e&&e.__v_isReadonly)}function qe(e){return!!(e&&e.__v_isShallow)}function bo(e){return e?!!e.__v_raw:!1}function Z(e){const t=e&&e.__v_raw;return t?Z(t):e}function jr(e){return!te(e,"__v_skip")&&Object.isExtensible(e)&&ls(e,"__v_skip",!0),e}const Ee=e=>ce(e)?mo(e):e,Zn=e=>ce(e)?Ps(e):e;function be(e){return e?e.__v_isRef===!0:!1}function F(e){return Nr(e,!1)}function Nr(e,t){return be(e)?e:new Br(e,t)}class Br{constructor(t,n){this.dep=new po,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Z(t),this._value=n?t:Ee(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||qe(t)||St(t);t=o?t:Z(t),pt(t,n)&&(this._rawValue=t,this._value=o?t:Ee(t),this.dep.trigger())}}function Vr(e){return be(e)?e.value:e}const Hr={get:(e,t,n)=>t==="__v_raw"?e:Vr(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const s=e[t];return be(s)&&!be(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function Es(e){return Yt(e)?e:new Proxy(e,Hr)}function Ur(e){const t=H(e)?new Array(e.length):{};for(const n in e)t[n]=Wr(e,n);return t}class zr{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return yr(Z(this._object),this._key)}}function Wr(e,t,n){const o=e[t];return be(o)?o:new zr(e,t,n)}class Kr{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new po(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return ps(this,!0),!0}get value(){const t=this.dep.track();return ms(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function qr(e,t,n=!1){let o,s;return z(e)?o=e:(o=e.get,s=e.set),new Kr(o,s,n)}const fn={},wn=new WeakMap;let _t;function Yr(e,t=!1,n=_t){if(n){let o=wn.get(n);o||wn.set(n,o=[]),o.push(e)}}function Gr(e,t,n=se){const{immediate:o,deep:s,once:r,scheduler:i,augmentJob:a,call:u}=n,h=$=>s?$:qe($)||s===!1||s===0?it($,1):it($);let f,g,y,M,N=!1,R=!1;if(be(e)?(g=()=>e.value,N=qe(e)):Yt(e)?(g=()=>h(e),N=!0):H(e)?(R=!0,N=e.some($=>Yt($)||qe($)),g=()=>e.map($=>{if(be($))return $.value;if(Yt($))return h($);if(z($))return u?u($,2):$()})):z(e)?t?g=u?()=>u(e,2):e:g=()=>{if(y){lt();try{y()}finally{at()}}const $=_t;_t=f;try{return u?u(e,3,[M]):e(M)}finally{_t=$}}:g=Xe,t&&s){const $=g,Q=s===!0?1/0:s;g=()=>it($(),Q)}const re=vr(),W=()=>{f.stop(),re&&re.active&&lo(re.effects,f)};if(r&&t){const $=t;t=(...Q)=>{$(...Q),W()}}let G=R?new Array(e.length).fill(fn):fn;const K=$=>{if(!(!(f.flags&1)||!f.dirty&&!$))if(t){const Q=f.run();if(s||N||(R?Q.some((ue,ve)=>pt(ue,G[ve])):pt(Q,G))){y&&y();const ue=_t;_t=f;try{const ve=[Q,G===fn?void 0:R&&G[0]===fn?[]:G,M];G=Q,u?u(t,3,ve):t(...ve)}finally{_t=ue}}}else f.run()};return a&&a(K),f=new fs(g),f.scheduler=i?()=>i(K,!1):K,M=$=>Yr($,!1,f),y=f.onStop=()=>{const $=wn.get(f);if($){if(u)u($,4);else for(const Q of $)Q();wn.delete(f)}},t?o?K(!0):G=f.run():i?i(K.bind(null,!0),!0):f.run(),W.pause=f.pause.bind(f),W.resume=f.resume.bind(f),W.stop=W,W}function it(e,t=1/0,n){if(t<=0||!ce(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,be(e))it(e.value,t,n);else if(H(e))for(let o=0;o<e.length;o++)it(e[o],t,n);else if(os(e)||Rt(e))e.forEach(o=>{it(o,t,n)});else if(is(e)){for(const o in e)it(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&it(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ln(e,t,n,o){try{return o?e(...o):e()}catch(s){An(s,t,n)}}function Ze(e,t,n,o){if(z(e)){const s=ln(e,t,n,o);return s&&ss(s)&&s.catch(r=>{An(r,t,n)}),s}if(H(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Ze(e[r],t,n,o));return s}}function An(e,t,n,o=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||se;if(t){let a=t.parent;const u=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](e,u,h)===!1)return}a=a.parent}if(r){lt(),ln(r,null,10,[e,u,h]),at();return}}Jr(e,n,s,o,i)}function Jr(e,t,n,o=!0,s=!1){if(s)throw e;console.error(e)}const Me=[];let Ge=-1;const Ft=[];let ft=null,kt=0;const Ms=Promise.resolve();let yn=null;function Lt(e){const t=yn||Ms;return e?t.then(this?e.bind(this):e):t}function Xr(e){let t=Ge+1,n=Me.length;for(;t<n;){const o=t+n>>>1,s=Me[o],r=tn(s);r<e||r===e&&s.flags&2?t=o+1:n=o}return t}function wo(e){if(!(e.flags&1)){const t=tn(e),n=Me[Me.length-1];!n||!(e.flags&2)&&t>=tn(n)?Me.push(e):Me.splice(Xr(t),0,e),e.flags|=1,Ts()}}function Ts(){yn||(yn=Ms.then(ks))}function Zr(e){H(e)?Ft.push(...e):ft&&e.id===-1?ft.splice(kt+1,0,e):e.flags&1||(Ft.push(e),e.flags|=1),Ts()}function Mo(e,t,n=Ge+1){for(;n<Me.length;n++){const o=Me[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Me.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Os(e){if(Ft.length){const t=[...new Set(Ft)].sort((n,o)=>tn(n)-tn(o));if(Ft.length=0,ft){ft.push(...t);return}for(ft=t,kt=0;kt<ft.length;kt++){const n=ft[kt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ft=null,kt=0}}const tn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ks(e){try{for(Ge=0;Ge<Me.length;Ge++){const t=Me[Ge];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ln(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ge<Me.length;Ge++){const t=Me[Ge];t&&(t.flags&=-2)}Ge=-1,Me.length=0,Os(),yn=null,(Me.length||Ft.length)&&ks()}}let De=null,Is=null;function _n(e){const t=De;return De=e,Is=e&&e.type.__scopeId||null,t}function Qr(e,t=De,n){if(!t||e._n)return e;const o=(...s)=>{o._d&&jo(-1);const r=_n(t);let i;try{i=e(...s)}finally{_n(r),o._d&&jo(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function nt(e,t){if(De===null)return e;const n=Ln(De),o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,i,a,u=se]=t[s];r&&(z(r)&&(r={mounted:r,updated:r}),r.deep&&it(i),o.push({dir:r,instance:n,value:i,oldValue:void 0,arg:a,modifiers:u}))}return e}function bt(e,t,n,o){const s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){const a=s[i];r&&(a.oldValue=r[i].value);let u=a.dir[o];u&&(lt(),Ze(u,n,8,[e.el,a,e,t]),at())}}const ei=Symbol("_vte"),ti=e=>e.__isTeleport,ni=Symbol("_leaveCb");function yo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,yo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function As(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xn=new WeakMap;function Gt(e,t,n,o,s=!1){if(H(e)){e.forEach((N,R)=>Gt(N,t&&(H(t)?t[R]:t),n,o,s));return}if(Jt(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Gt(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Ln(o.component):o.el,i=s?null:r,{i:a,r:u}=e,h=t&&t.r,f=a.refs===se?a.refs={}:a.refs,g=a.setupState,y=Z(g),M=g===se?ns:N=>te(y,N);if(h!=null&&h!==u){if(To(t),me(h))f[h]=null,M(h)&&(g[h]=null);else if(be(h)){h.value=null;const N=t;N.k&&(f[N.k]=null)}}if(z(u))ln(u,a,12,[i,f]);else{const N=me(u),R=be(u);if(N||R){const re=()=>{if(e.f){const W=N?M(u)?g[u]:f[u]:u.value;if(s)H(W)&&lo(W,r);else if(H(W))W.includes(r)||W.push(r);else if(N)f[u]=[r],M(u)&&(g[u]=f[u]);else{const G=[r];u.value=G,e.k&&(f[e.k]=G)}}else N?(f[u]=i,M(u)&&(g[u]=i)):R&&(u.value=i,e.k&&(f[e.k]=i))};if(i){const W=()=>{re(),xn.delete(e)};W.id=-1,xn.set(e,W),Ae(W,n)}else To(e),re()}}}function To(e){const t=xn.get(e);t&&(t.flags|=8,xn.delete(e))}In().requestIdleCallback;In().cancelIdleCallback;const Jt=e=>!!e.type.__asyncLoader,Ds=e=>e.type.__isKeepAlive;function oi(e,t){Rs(e,"a",t)}function si(e,t){Rs(e,"da",t)}function Rs(e,t,n=xe){const o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Dn(t,o,n),n){let s=n.parent;for(;s&&s.parent;)Ds(s.parent.vnode)&&ri(o,t,n,s),s=s.parent}}function ri(e,t,n,o){const s=Dn(t,e,o,!0);Fs(()=>{lo(o[t],s)},n)}function Dn(e,t,n=xe,o=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{lt();const a=an(n),u=Ze(t,n,e,i);return a(),at(),u});return o?s.unshift(r):s.push(r),r}}const ct=e=>(t,n=xe)=>{(!rn||e==="sp")&&Dn(e,(...o)=>t(...o),n)},ii=ct("bm"),nn=ct("m"),li=ct("bu"),ai=ct("u"),Cn=ct("bum"),Fs=ct("um"),ci=ct("sp"),ui=ct("rtg"),fi=ct("rtc");function di(e,t=xe){Dn("ec",e,t)}const pi="components";function wt(e,t){return gi(pi,e,!0,t)||e}const hi=Symbol.for("v-ndc");function gi(e,t,n=!0,o=!1){const s=De||xe;if(s){const r=s.type;{const a=sl(r,!1);if(a&&(a===t||a===Be(t)||a===kn(Be(t))))return r}const i=Oo(s[e]||r[e],t)||Oo(s.appContext[e],t);return!i&&o?r:i}}function Oo(e,t){return e&&(e[t]||e[Be(t)]||e[kn(Be(t))])}const Qn=e=>e?nr(e)?Ln(e):Qn(e.parent):null,Xt=Te(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qn(e.parent),$root:e=>Qn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$s(e),$forceUpdate:e=>e.f||(e.f=()=>{wo(e.update)}),$nextTick:e=>e.n||(e.n=Lt.bind(e.proxy)),$watch:e=>$i.bind(e)}),Un=(e,t)=>e!==se&&!e.__isScriptSetup&&te(e,t),mi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:s,props:r,accessCache:i,type:a,appContext:u}=e;let h;if(t[0]!=="$"){const M=i[t];if(M!==void 0)switch(M){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Un(o,t))return i[t]=1,o[t];if(s!==se&&te(s,t))return i[t]=2,s[t];if((h=e.propsOptions[0])&&te(h,t))return i[t]=3,r[t];if(n!==se&&te(n,t))return i[t]=4,n[t];eo&&(i[t]=0)}}const f=Xt[t];let g,y;if(f)return t==="$attrs"&&_e(e.attrs,"get",""),f(e);if((g=a.__cssModules)&&(g=g[t]))return g;if(n!==se&&te(n,t))return i[t]=4,n[t];if(y=u.config.globalProperties,te(y,t))return y[t]},set({_:e},t,n){const{data:o,setupState:s,ctx:r}=e;return Un(s,t)?(s[t]=n,!0):o!==se&&te(o,t)?(o[t]=n,!0):te(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,propsOptions:r,type:i}},a){let u,h;return!!(n[a]||e!==se&&a[0]!=="$"&&te(e,a)||Un(t,a)||(u=r[0])&&te(u,a)||te(o,a)||te(Xt,a)||te(s.config.globalProperties,a)||(h=i.__cssModules)&&h[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:te(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ko(e){return H(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let eo=!0;function vi(e){const t=$s(e),n=e.proxy,o=e.ctx;eo=!1,t.beforeCreate&&Io(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:i,watch:a,provide:u,inject:h,created:f,beforeMount:g,mounted:y,beforeUpdate:M,updated:N,activated:R,deactivated:re,beforeDestroy:W,beforeUnmount:G,destroyed:K,unmounted:$,render:Q,renderTracked:ue,renderTriggered:ve,errorCaptured:we,serverPrefetch:Ve,expose:Oe,inheritAttrs:Fe,components:He,directives:Ue,filters:I}=t;if(h&&bi(h,o,null),i)for(const _ in i){const D=i[_];z(D)&&(o[_]=D.bind(n))}if(s){const _=s.call(n,n);ce(_)&&(e.data=mo(_))}if(eo=!0,r)for(const _ in r){const D=r[_],ee=z(D)?D.bind(n,n):z(D.get)?D.get.bind(n,n):Xe,fe=!z(D)&&z(D.set)?D.set.bind(n):Xe,B=We({get:ee,set:fe});Object.defineProperty(o,_,{enumerable:!0,configurable:!0,get:()=>B.value,set:ne=>B.value=ne})}if(a)for(const _ in a)Ls(a[_],o,n,_);if(u){const _=z(u)?u.call(n):u;Reflect.ownKeys(_).forEach(D=>{Si(D,_[D])})}f&&Io(f,e,"c");function J(_,D){H(D)?D.forEach(ee=>_(ee.bind(n))):D&&_(D.bind(n))}if(J(ii,g),J(nn,y),J(li,M),J(ai,N),J(oi,R),J(si,re),J(di,we),J(fi,ue),J(ui,ve),J(Cn,G),J(Fs,$),J(ci,Ve),H(Oe))if(Oe.length){const _=e.exposed||(e.exposed={});Oe.forEach(D=>{Object.defineProperty(_,D,{get:()=>n[D],set:ee=>n[D]=ee,enumerable:!0})})}else e.exposed||(e.exposed={});Q&&e.render===Xe&&(e.render=Q),Fe!=null&&(e.inheritAttrs=Fe),He&&(e.components=He),Ue&&(e.directives=Ue),Ve&&As(e)}function bi(e,t,n=Xe){H(e)&&(e=to(e));for(const o in e){const s=e[o];let r;ce(s)?"default"in s?r=pn(s.from||o,s.default,!0):r=pn(s.from||o):r=pn(s),be(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[o]=r}}function Io(e,t,n){Ze(H(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ls(e,t,n,o){let s=o.includes(".")?Js(n,o):()=>n[o];if(me(e)){const r=t[e];z(r)&&hn(s,r)}else if(z(e))hn(s,e.bind(n));else if(ce(e))if(H(e))e.forEach(r=>Ls(r,t,n,o));else{const r=z(e.handler)?e.handler.bind(n):t[e.handler];z(r)&&hn(s,r,e)}}function $s(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let u;return a?u=a:!s.length&&!n&&!o?u=t:(u={},s.length&&s.forEach(h=>Sn(u,h,i,!0)),Sn(u,t,i)),ce(t)&&r.set(t,u),u}function Sn(e,t,n,o=!1){const{mixins:s,extends:r}=t;r&&Sn(e,r,n,!0),s&&s.forEach(i=>Sn(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const a=wi[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const wi={data:Ao,props:Do,emits:Do,methods:zt,computed:zt,beforeCreate:Pe,created:Pe,beforeMount:Pe,mounted:Pe,beforeUpdate:Pe,updated:Pe,beforeDestroy:Pe,beforeUnmount:Pe,destroyed:Pe,unmounted:Pe,activated:Pe,deactivated:Pe,errorCaptured:Pe,serverPrefetch:Pe,components:zt,directives:zt,watch:_i,provide:Ao,inject:yi};function Ao(e,t){return t?e?function(){return Te(z(e)?e.call(this,this):e,z(t)?t.call(this,this):t)}:t:e}function yi(e,t){return zt(to(e),to(t))}function to(e){if(H(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Pe(e,t){return e?[...new Set([].concat(e,t))]:t}function zt(e,t){return e?Te(Object.create(null),e,t):t}function Do(e,t){return e?H(e)&&H(t)?[...new Set([...e,...t])]:Te(Object.create(null),ko(e),ko(t??{})):t}function _i(e,t){if(!e)return t;if(!t)return e;const n=Te(Object.create(null),e);for(const o in t)n[o]=Pe(e[o],t[o]);return n}function js(){return{app:null,config:{isNativeTag:ns,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xi=0;function Ci(e,t){return function(o,s=null){z(o)||(o=Te({},o)),s!=null&&!ce(s)&&(s=null);const r=js(),i=new WeakSet,a=[];let u=!1;const h=r.app={_uid:xi++,_component:o,_props:s,_container:null,_context:r,_instance:null,version:il,get config(){return r.config},set config(f){},use(f,...g){return i.has(f)||(f&&z(f.install)?(i.add(f),f.install(h,...g)):z(f)&&(i.add(f),f(h,...g))),h},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),h},component(f,g){return g?(r.components[f]=g,h):r.components[f]},directive(f,g){return g?(r.directives[f]=g,h):r.directives[f]},mount(f,g,y){if(!u){const M=h._ceVNode||Ne(o,s);return M.appContext=r,y===!0?y="svg":y===!1&&(y=void 0),e(M,f,y),u=!0,h._container=f,f.__vue_app__=h,Ln(M.component)}},onUnmount(f){a.push(f)},unmount(){u&&(Ze(a,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(f,g){return r.provides[f]=g,h},runWithContext(f){const g=$t;$t=h;try{return f()}finally{$t=g}}};return h}}let $t=null;function Si(e,t){if(xe){let n=xe.provides;const o=xe.parent&&xe.parent.provides;o===n&&(n=xe.provides=Object.create(o)),n[e]=t}}function pn(e,t,n=!1){const o=Qi();if(o||$t){let s=$t?$t._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&z(t)?t.call(o&&o.proxy):t}}const Ns={},Bs=()=>Object.create(Ns),Vs=e=>Object.getPrototypeOf(e)===Ns;function Pi(e,t,n,o=!1){const s={},r=Bs();e.propsDefaults=Object.create(null),Hs(e,t,s,r);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:$r(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Ei(e,t,n,o){const{props:s,attrs:r,vnode:{patchFlag:i}}=e,a=Z(s),[u]=e.propsOptions;let h=!1;if((o||i>0)&&!(i&16)){if(i&8){const f=e.vnode.dynamicProps;for(let g=0;g<f.length;g++){let y=f[g];if(Rn(e.emitsOptions,y))continue;const M=t[y];if(u)if(te(r,y))M!==r[y]&&(r[y]=M,h=!0);else{const N=Be(y);s[N]=no(u,a,N,M,e,!1)}else M!==r[y]&&(r[y]=M,h=!0)}}}else{Hs(e,t,s,r)&&(h=!0);let f;for(const g in a)(!t||!te(t,g)&&((f=mt(g))===g||!te(t,f)))&&(u?n&&(n[g]!==void 0||n[f]!==void 0)&&(s[g]=no(u,a,g,void 0,e,!0)):delete s[g]);if(r!==a)for(const g in r)(!t||!te(t,g))&&(delete r[g],h=!0)}h&&rt(e.attrs,"set","")}function Hs(e,t,n,o){const[s,r]=e.propsOptions;let i=!1,a;if(t)for(let u in t){if(Wt(u))continue;const h=t[u];let f;s&&te(s,f=Be(u))?!r||!r.includes(f)?n[f]=h:(a||(a={}))[f]=h:Rn(e.emitsOptions,u)||(!(u in o)||h!==o[u])&&(o[u]=h,i=!0)}if(r){const u=Z(n),h=a||se;for(let f=0;f<r.length;f++){const g=r[f];n[g]=no(s,u,g,h[g],e,!te(h,g))}}return i}function no(e,t,n,o,s,r){const i=e[n];if(i!=null){const a=te(i,"default");if(a&&o===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&z(u)){const{propsDefaults:h}=s;if(n in h)o=h[n];else{const f=an(s);o=h[n]=u.call(null,t),f()}}else o=u;s.ce&&s.ce._setProp(n,o)}i[0]&&(r&&!a?o=!1:i[1]&&(o===""||o===mt(n))&&(o=!0))}return o}const Mi=new WeakMap;function Us(e,t,n=!1){const o=n?Mi:t.propsCache,s=o.get(e);if(s)return s;const r=e.props,i={},a=[];let u=!1;if(!z(e)){const f=g=>{u=!0;const[y,M]=Us(g,t,!0);Te(i,y),M&&a.push(...M)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!u)return ce(e)&&o.set(e,Dt),Dt;if(H(r))for(let f=0;f<r.length;f++){const g=Be(r[f]);Ro(g)&&(i[g]=se)}else if(r)for(const f in r){const g=Be(f);if(Ro(g)){const y=r[f],M=i[g]=H(y)||z(y)?{type:y}:Te({},y),N=M.type;let R=!1,re=!0;if(H(N))for(let W=0;W<N.length;++W){const G=N[W],K=z(G)&&G.name;if(K==="Boolean"){R=!0;break}else K==="String"&&(re=!1)}else R=z(N)&&N.name==="Boolean";M[0]=R,M[1]=re,(R||te(M,"default"))&&a.push(g)}}const h=[i,a];return ce(e)&&o.set(e,h),h}function Ro(e){return e[0]!=="$"&&!Wt(e)}const _o=e=>e==="_"||e==="_ctx"||e==="$stable",xo=e=>H(e)?e.map(Je):[Je(e)],Ti=(e,t,n)=>{if(t._n)return t;const o=Qr((...s)=>xo(t(...s)),n);return o._c=!1,o},zs=(e,t,n)=>{const o=e._ctx;for(const s in e){if(_o(s))continue;const r=e[s];if(z(r))t[s]=Ti(s,r,o);else if(r!=null){const i=xo(r);t[s]=()=>i}}},Ws=(e,t)=>{const n=xo(t);e.slots.default=()=>n},Ks=(e,t,n)=>{for(const o in t)(n||!_o(o))&&(e[o]=t[o])},Oi=(e,t,n)=>{const o=e.slots=Bs();if(e.vnode.shapeFlag&32){const s=t._;s?(Ks(o,t,n),n&&ls(o,"_",s,!0)):zs(t,o)}else t&&Ws(e,t)},ki=(e,t,n)=>{const{vnode:o,slots:s}=e;let r=!0,i=se;if(o.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Ks(s,t,n):(r=!t.$stable,zs(t,s)),i=t}else t&&(Ws(e,t),i={default:1});if(r)for(const a in s)!_o(a)&&i[a]==null&&delete s[a]},Ae=Wi;function Ii(e){return Ai(e)}function Ai(e,t){const n=In();n.__VUE__=!0;const{insert:o,remove:s,patchProp:r,createElement:i,createText:a,createComment:u,setText:h,setElementText:f,parentNode:g,nextSibling:y,setScopeId:M=Xe,insertStaticContent:N}=e,R=(l,c,d,m=null,v=null,b=null,x=void 0,P=null,C=!!c.dynamicChildren)=>{if(l===c)return;l&&!Ht(l,c)&&(m=T(l),ne(l,v,b,!0),l=null),c.patchFlag===-2&&(C=!1,c.dynamicChildren=null);const{type:w,ref:A,shapeFlag:E}=c;switch(w){case Fn:re(l,c,d,m);break;case ht:W(l,c,d,m);break;case gn:l==null&&G(c,d,m,x);break;case st:He(l,c,d,m,v,b,x,P,C);break;default:E&1?Q(l,c,d,m,v,b,x,P,C):E&6?Ue(l,c,d,m,v,b,x,P,C):(E&64||E&128)&&w.process(l,c,d,m,v,b,x,P,C,O)}A!=null&&v?Gt(A,l&&l.ref,b,c||l,!c):A==null&&l&&l.ref!=null&&Gt(l.ref,null,b,l,!0)},re=(l,c,d,m)=>{if(l==null)o(c.el=a(c.children),d,m);else{const v=c.el=l.el;c.children!==l.children&&h(v,c.children)}},W=(l,c,d,m)=>{l==null?o(c.el=u(c.children||""),d,m):c.el=l.el},G=(l,c,d,m)=>{[l.el,l.anchor]=N(l.children,c,d,m,l.el,l.anchor)},K=({el:l,anchor:c},d,m)=>{let v;for(;l&&l!==c;)v=y(l),o(l,d,m),l=v;o(c,d,m)},$=({el:l,anchor:c})=>{let d;for(;l&&l!==c;)d=y(l),s(l),l=d;s(c)},Q=(l,c,d,m,v,b,x,P,C)=>{c.type==="svg"?x="svg":c.type==="math"&&(x="mathml"),l==null?ue(c,d,m,v,b,x,P,C):Ve(l,c,v,b,x,P,C)},ue=(l,c,d,m,v,b,x,P)=>{let C,w;const{props:A,shapeFlag:E,transition:k,dirs:L}=l;if(C=l.el=i(l.type,b,A&&A.is,A),E&8?f(C,l.children):E&16&&we(l.children,C,null,m,v,zn(l,b),x,P),L&&bt(l,null,m,"created"),ve(C,l,l.scopeId,x,m),A){for(const q in A)q!=="value"&&!Wt(q)&&r(C,q,null,A[q],b,m);"value"in A&&r(C,"value",null,A.value,b),(w=A.onVnodeBeforeMount)&&Ye(w,m,l)}L&&bt(l,null,m,"beforeMount");const V=Di(v,k);V&&k.beforeEnter(C),o(C,c,d),((w=A&&A.onVnodeMounted)||V||L)&&Ae(()=>{w&&Ye(w,m,l),V&&k.enter(C),L&&bt(l,null,m,"mounted")},v)},ve=(l,c,d,m,v)=>{if(d&&M(l,d),m)for(let b=0;b<m.length;b++)M(l,m[b]);if(v){let b=v.subTree;if(c===b||Zs(b.type)&&(b.ssContent===c||b.ssFallback===c)){const x=v.vnode;ve(l,x,x.scopeId,x.slotScopeIds,v.parent)}}},we=(l,c,d,m,v,b,x,P,C=0)=>{for(let w=C;w<l.length;w++){const A=l[w]=P?dt(l[w]):Je(l[w]);R(null,A,c,d,m,v,b,x,P)}},Ve=(l,c,d,m,v,b,x)=>{const P=c.el=l.el;let{patchFlag:C,dynamicChildren:w,dirs:A}=c;C|=l.patchFlag&16;const E=l.props||se,k=c.props||se;let L;if(d&&yt(d,!1),(L=k.onVnodeBeforeUpdate)&&Ye(L,d,c,l),A&&bt(c,l,d,"beforeUpdate"),d&&yt(d,!0),(E.innerHTML&&k.innerHTML==null||E.textContent&&k.textContent==null)&&f(P,""),w?Oe(l.dynamicChildren,w,P,d,m,zn(c,v),b):x||D(l,c,P,null,d,m,zn(c,v),b,!1),C>0){if(C&16)Fe(P,E,k,d,v);else if(C&2&&E.class!==k.class&&r(P,"class",null,k.class,v),C&4&&r(P,"style",E.style,k.style,v),C&8){const V=c.dynamicProps;for(let q=0;q<V.length;q++){const Y=V[q],pe=E[Y],de=k[Y];(de!==pe||Y==="value")&&r(P,Y,pe,de,v,d)}}C&1&&l.children!==c.children&&f(P,c.children)}else!x&&w==null&&Fe(P,E,k,d,v);((L=k.onVnodeUpdated)||A)&&Ae(()=>{L&&Ye(L,d,c,l),A&&bt(c,l,d,"updated")},m)},Oe=(l,c,d,m,v,b,x)=>{for(let P=0;P<c.length;P++){const C=l[P],w=c[P],A=C.el&&(C.type===st||!Ht(C,w)||C.shapeFlag&198)?g(C.el):d;R(C,w,A,null,m,v,b,x,!0)}},Fe=(l,c,d,m,v)=>{if(c!==d){if(c!==se)for(const b in c)!Wt(b)&&!(b in d)&&r(l,b,c[b],null,v,m);for(const b in d){if(Wt(b))continue;const x=d[b],P=c[b];x!==P&&b!=="value"&&r(l,b,P,x,v,m)}"value"in d&&r(l,"value",c.value,d.value,v)}},He=(l,c,d,m,v,b,x,P,C)=>{const w=c.el=l?l.el:a(""),A=c.anchor=l?l.anchor:a("");let{patchFlag:E,dynamicChildren:k,slotScopeIds:L}=c;L&&(P=P?P.concat(L):L),l==null?(o(w,d,m),o(A,d,m),we(c.children||[],d,A,v,b,x,P,C)):E>0&&E&64&&k&&l.dynamicChildren?(Oe(l.dynamicChildren,k,d,v,b,x,P),(c.key!=null||v&&c===v.subTree)&&qs(l,c,!0)):D(l,c,d,A,v,b,x,P,C)},Ue=(l,c,d,m,v,b,x,P,C)=>{c.slotScopeIds=P,l==null?c.shapeFlag&512?v.ctx.activate(c,d,m,x,C):I(c,d,m,v,b,x,C):le(l,c,C)},I=(l,c,d,m,v,b,x)=>{const P=l.component=Zi(l,m,v);if(Ds(l)&&(P.ctx.renderer=O),el(P,!1,x),P.asyncDep){if(v&&v.registerDep(P,J,x),!l.el){const C=P.subTree=Ne(ht);W(null,C,c,d),l.placeholder=C.el}}else J(P,l,c,d,v,b,x)},le=(l,c,d)=>{const m=c.component=l.component;if(Ui(l,c,d))if(m.asyncDep&&!m.asyncResolved){_(m,c,d);return}else m.next=c,m.update();else c.el=l.el,m.vnode=c},J=(l,c,d,m,v,b,x)=>{const P=()=>{if(l.isMounted){let{next:E,bu:k,u:L,parent:V,vnode:q}=l;{const Ce=Ys(l);if(Ce){E&&(E.el=q.el,_(l,E,x)),Ce.asyncDep.then(()=>{l.isUnmounted||P()});return}}let Y=E,pe;yt(l,!1),E?(E.el=q.el,_(l,E,x)):E=q,k&&dn(k),(pe=E.props&&E.props.onVnodeBeforeUpdate)&&Ye(pe,V,E,q),yt(l,!0);const de=Lo(l),ke=l.subTree;l.subTree=de,R(ke,de,g(ke.el),T(ke),l,v,b),E.el=de.el,Y===null&&zi(l,de.el),L&&Ae(L,v),(pe=E.props&&E.props.onVnodeUpdated)&&Ae(()=>Ye(pe,V,E,q),v)}else{let E;const{el:k,props:L}=c,{bm:V,m:q,parent:Y,root:pe,type:de}=l,ke=Jt(c);yt(l,!1),V&&dn(V),!ke&&(E=L&&L.onVnodeBeforeMount)&&Ye(E,Y,c),yt(l,!0);{pe.ce&&pe.ce._def.shadowRoot!==!1&&pe.ce._injectChildStyle(de);const Ce=l.subTree=Lo(l);R(null,Ce,d,m,l,v,b),c.el=Ce.el}if(q&&Ae(q,v),!ke&&(E=L&&L.onVnodeMounted)){const Ce=c;Ae(()=>Ye(E,Y,Ce),v)}(c.shapeFlag&256||Y&&Jt(Y.vnode)&&Y.vnode.shapeFlag&256)&&l.a&&Ae(l.a,v),l.isMounted=!0,c=d=m=null}};l.scope.on();const C=l.effect=new fs(P);l.scope.off();const w=l.update=C.run.bind(C),A=l.job=C.runIfDirty.bind(C);A.i=l,A.id=l.uid,C.scheduler=()=>wo(A),yt(l,!0),w()},_=(l,c,d)=>{c.component=l;const m=l.vnode.props;l.vnode=c,l.next=null,Ei(l,c.props,m,d),ki(l,c.children,d),lt(),Mo(l),at()},D=(l,c,d,m,v,b,x,P,C=!1)=>{const w=l&&l.children,A=l?l.shapeFlag:0,E=c.children,{patchFlag:k,shapeFlag:L}=c;if(k>0){if(k&128){fe(w,E,d,m,v,b,x,P,C);return}else if(k&256){ee(w,E,d,m,v,b,x,P,C);return}}L&8?(A&16&&S(w,v,b),E!==w&&f(d,E)):A&16?L&16?fe(w,E,d,m,v,b,x,P,C):S(w,v,b,!0):(A&8&&f(d,""),L&16&&we(E,d,m,v,b,x,P,C))},ee=(l,c,d,m,v,b,x,P,C)=>{l=l||Dt,c=c||Dt;const w=l.length,A=c.length,E=Math.min(w,A);let k;for(k=0;k<E;k++){const L=c[k]=C?dt(c[k]):Je(c[k]);R(l[k],L,d,null,v,b,x,P,C)}w>A?S(l,v,b,!0,!1,E):we(c,d,m,v,b,x,P,C,E)},fe=(l,c,d,m,v,b,x,P,C)=>{let w=0;const A=c.length;let E=l.length-1,k=A-1;for(;w<=E&&w<=k;){const L=l[w],V=c[w]=C?dt(c[w]):Je(c[w]);if(Ht(L,V))R(L,V,d,null,v,b,x,P,C);else break;w++}for(;w<=E&&w<=k;){const L=l[E],V=c[k]=C?dt(c[k]):Je(c[k]);if(Ht(L,V))R(L,V,d,null,v,b,x,P,C);else break;E--,k--}if(w>E){if(w<=k){const L=k+1,V=L<A?c[L].el:m;for(;w<=k;)R(null,c[w]=C?dt(c[w]):Je(c[w]),d,V,v,b,x,P,C),w++}}else if(w>k)for(;w<=E;)ne(l[w],v,b,!0),w++;else{const L=w,V=w,q=new Map;for(w=V;w<=k;w++){const he=c[w]=C?dt(c[w]):Je(c[w]);he.key!=null&&q.set(he.key,w)}let Y,pe=0;const de=k-V+1;let ke=!1,Ce=0;const et=new Array(de);for(w=0;w<de;w++)et[w]=0;for(w=L;w<=E;w++){const he=l[w];if(pe>=de){ne(he,v,b,!0);continue}let Se;if(he.key!=null)Se=q.get(he.key);else for(Y=V;Y<=k;Y++)if(et[Y-V]===0&&Ht(he,c[Y])){Se=Y;break}Se===void 0?ne(he,v,b,!0):(et[Se-V]=w+1,Se>=Ce?Ce=Se:ke=!0,R(he,c[Se],d,null,v,b,x,P,C),pe++)}const $e=ke?Ri(et):Dt;for(Y=$e.length-1,w=de-1;w>=0;w--){const he=V+w,Se=c[he],oe=c[he+1],ze=he+1<A?oe.el||oe.placeholder:m;et[w]===0?R(null,Se,d,ze,v,b,x,P,C):ke&&(Y<0||w!==$e[Y]?B(Se,d,ze,2):Y--)}}},B=(l,c,d,m,v=null)=>{const{el:b,type:x,transition:P,children:C,shapeFlag:w}=l;if(w&6){B(l.component.subTree,c,d,m);return}if(w&128){l.suspense.move(c,d,m);return}if(w&64){x.move(l,c,d,O);return}if(x===st){o(b,c,d);for(let E=0;E<C.length;E++)B(C[E],c,d,m);o(l.anchor,c,d);return}if(x===gn){K(l,c,d);return}if(m!==2&&w&1&&P)if(m===0)P.beforeEnter(b),o(b,c,d),Ae(()=>P.enter(b),v);else{const{leave:E,delayLeave:k,afterLeave:L}=P,V=()=>{l.ctx.isUnmounted?s(b):o(b,c,d)},q=()=>{b._isLeaving&&b[ni](!0),E(b,()=>{V(),L&&L()})};k?k(b,V,q):q()}else o(b,c,d)},ne=(l,c,d,m=!1,v=!1)=>{const{type:b,props:x,ref:P,children:C,dynamicChildren:w,shapeFlag:A,patchFlag:E,dirs:k,cacheIndex:L}=l;if(E===-2&&(v=!1),P!=null&&(lt(),Gt(P,null,d,l,!0),at()),L!=null&&(c.renderCache[L]=void 0),A&256){c.ctx.deactivate(l);return}const V=A&1&&k,q=!Jt(l);let Y;if(q&&(Y=x&&x.onVnodeBeforeUnmount)&&Ye(Y,c,l),A&6)Pt(l.component,d,m);else{if(A&128){l.suspense.unmount(d,m);return}V&&bt(l,null,c,"beforeUnmount"),A&64?l.type.remove(l,c,d,O,m):w&&!w.hasOnce&&(b!==st||E>0&&E&64)?S(w,c,d,!1,!0):(b===st&&E&384||!v&&A&16)&&S(C,c,d),m&&Le(l)}(q&&(Y=x&&x.onVnodeUnmounted)||V)&&Ae(()=>{Y&&Ye(Y,c,l),V&&bt(l,null,c,"unmounted")},d)},Le=l=>{const{type:c,el:d,anchor:m,transition:v}=l;if(c===st){Bt(d,m);return}if(c===gn){$(l);return}const b=()=>{s(d),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(l.shapeFlag&1&&v&&!v.persisted){const{leave:x,delayLeave:P}=v,C=()=>x(d,b);P?P(l.el,b,C):C()}else b()},Bt=(l,c)=>{let d;for(;l!==c;)d=y(l),s(l),l=d;s(c)},Pt=(l,c,d)=>{const{bum:m,scope:v,job:b,subTree:x,um:P,m:C,a:w}=l;Fo(C),Fo(w),m&&dn(m),v.stop(),b&&(b.flags|=8,ne(x,l,c,d)),P&&Ae(P,c),Ae(()=>{l.isUnmounted=!0},c)},S=(l,c,d,m=!1,v=!1,b=0)=>{for(let x=b;x<l.length;x++)ne(l[x],c,d,m,v)},T=l=>{if(l.shapeFlag&6)return T(l.component.subTree);if(l.shapeFlag&128)return l.suspense.next();const c=y(l.anchor||l.el),d=c&&c[ei];return d?y(d):c};let j=!1;const U=(l,c,d)=>{l==null?c._vnode&&ne(c._vnode,null,null,!0):R(c._vnode||null,l,c,null,null,null,d),c._vnode=l,j||(j=!0,Mo(),Os(),j=!1)},O={p:R,um:ne,m:B,r:Le,mt:I,mc:we,pc:D,pbc:Oe,n:T,o:e};return{render:U,hydrate:void 0,createApp:Ci(U)}}function zn({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function yt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Di(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function qs(e,t,n=!1){const o=e.children,s=t.children;if(H(o)&&H(s))for(let r=0;r<o.length;r++){const i=o[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=dt(s[r]),a.el=i.el),!n&&a.patchFlag!==-2&&qs(i,a)),a.type===Fn&&a.patchFlag!==-1&&(a.el=i.el),a.type===ht&&!a.el&&(a.el=i.el)}}function Ri(e){const t=e.slice(),n=[0];let o,s,r,i,a;const u=e.length;for(o=0;o<u;o++){const h=e[o];if(h!==0){if(s=n[n.length-1],e[s]<h){t[o]=s,n.push(o);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<h?r=a+1:i=a;h<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function Ys(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ys(t)}function Fo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Fi=Symbol.for("v-scx"),Li=()=>pn(Fi);function hn(e,t,n){return Gs(e,t,n)}function Gs(e,t,n=se){const{immediate:o,deep:s,flush:r,once:i}=n,a=Te({},n),u=t&&o||!t&&r!=="post";let h;if(rn){if(r==="sync"){const M=Li();h=M.__watcherHandles||(M.__watcherHandles=[])}else if(!u){const M=()=>{};return M.stop=Xe,M.resume=Xe,M.pause=Xe,M}}const f=xe;a.call=(M,N,R)=>Ze(M,f,N,R);let g=!1;r==="post"?a.scheduler=M=>{Ae(M,f&&f.suspense)}:r!=="sync"&&(g=!0,a.scheduler=(M,N)=>{N?M():wo(M)}),a.augmentJob=M=>{t&&(M.flags|=4),g&&(M.flags|=2,f&&(M.id=f.uid,M.i=f))};const y=Gr(e,t,a);return rn&&(h?h.push(y):u&&y()),y}function $i(e,t,n){const o=this.proxy,s=me(e)?e.includes(".")?Js(o,e):()=>o[e]:e.bind(o,o);let r;z(t)?r=t:(r=t.handler,n=t);const i=an(this),a=Gs(s,r.bind(o),n);return i(),a}function Js(e,t){const n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}const ji=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Be(t)}Modifiers`]||e[`${mt(t)}Modifiers`];function Ni(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||se;let s=n;const r=t.startsWith("update:"),i=r&&ji(o,t.slice(7));i&&(i.trim&&(s=n.map(f=>me(f)?f.trim():f)),i.number&&(s=n.map(Yn)));let a,u=o[a=jn(t)]||o[a=jn(Be(t))];!u&&r&&(u=o[a=jn(mt(t))]),u&&Ze(u,e,6,s);const h=o[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ze(h,e,6,s)}}const Bi=new WeakMap;function Xs(e,t,n=!1){const o=n?Bi:t.emitsCache,s=o.get(e);if(s!==void 0)return s;const r=e.emits;let i={},a=!1;if(!z(e)){const u=h=>{const f=Xs(h,t,!0);f&&(a=!0,Te(i,f))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!r&&!a?(ce(e)&&o.set(e,null),null):(H(r)?r.forEach(u=>i[u]=null):Te(i,r),ce(e)&&o.set(e,i),i)}function Rn(e,t){return!e||!Mn(t)?!1:(t=t.slice(2).replace(/Once$/,""),te(e,t[0].toLowerCase()+t.slice(1))||te(e,mt(t))||te(e,t))}function Lo(e){const{type:t,vnode:n,proxy:o,withProxy:s,propsOptions:[r],slots:i,attrs:a,emit:u,render:h,renderCache:f,props:g,data:y,setupState:M,ctx:N,inheritAttrs:R}=e,re=_n(e);let W,G;try{if(n.shapeFlag&4){const $=s||o,Q=$;W=Je(h.call(Q,$,f,g,M,y,N)),G=a}else{const $=t;W=Je($.length>1?$(g,{attrs:a,slots:i,emit:u}):$(g,null)),G=t.props?a:Vi(a)}}catch($){Zt.length=0,An($,e,1),W=Ne(ht)}let K=W;if(G&&R!==!1){const $=Object.keys(G),{shapeFlag:Q}=K;$.length&&Q&7&&(r&&$.some(io)&&(G=Hi(G,r)),K=Nt(K,G,!1,!0))}return n.dirs&&(K=Nt(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(n.dirs):n.dirs),n.transition&&yo(K,n.transition),W=K,_n(re),W}const Vi=e=>{let t;for(const n in e)(n==="class"||n==="style"||Mn(n))&&((t||(t={}))[n]=e[n]);return t},Hi=(e,t)=>{const n={};for(const o in e)(!io(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Ui(e,t,n){const{props:o,children:s,component:r}=e,{props:i,children:a,patchFlag:u}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return o?$o(o,i,h):!!i;if(u&8){const f=t.dynamicProps;for(let g=0;g<f.length;g++){const y=f[g];if(i[y]!==o[y]&&!Rn(h,y))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:o===i?!1:o?i?$o(o,i,h):!0:!!i;return!1}function $o(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const r=o[s];if(t[r]!==e[r]&&!Rn(n,r))return!0}return!1}function zi({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Zs=e=>e.__isSuspense;function Wi(e,t){t&&t.pendingBranch?H(e)?t.effects.push(...e):t.effects.push(e):Zr(e)}const st=Symbol.for("v-fgt"),Fn=Symbol.for("v-txt"),ht=Symbol.for("v-cmt"),gn=Symbol.for("v-stc"),Zt=[];let Re=null;function ae(e=!1){Zt.push(Re=e?null:[])}function Ki(){Zt.pop(),Re=Zt[Zt.length-1]||null}let on=1;function jo(e,t=!1){on+=e,e<0&&Re&&t&&(Re.hasOnce=!0)}function Qs(e){return e.dynamicChildren=on>0?Re||Dt:null,Ki(),on>0&&Re&&Re.push(e),e}function ge(e,t,n,o,s,r){return Qs(p(e,t,n,o,s,r,!0))}function It(e,t,n,o,s){return Qs(Ne(e,t,n,o,s,!0))}function er(e){return e?e.__v_isVNode===!0:!1}function Ht(e,t){return e.type===t.type&&e.key===t.key}const tr=({key:e})=>e??null,mn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?me(e)||be(e)||z(e)?{i:De,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,o=0,s=null,r=e===st?0:1,i=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&tr(t),ref:t&&mn(t),scopeId:Is,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:De};return a?(Co(u,n),r&128&&e.normalize(u)):n&&(u.shapeFlag|=me(n)?8:16),on>0&&!i&&Re&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&Re.push(u),u}const Ne=qi;function qi(e,t=null,n=null,o=0,s=null,r=!1){if((!e||e===hi)&&(e=ht),er(e)){const a=Nt(e,t,!0);return n&&Co(a,n),on>0&&!r&&Re&&(a.shapeFlag&6?Re[Re.indexOf(e)]=a:Re.push(a)),a.patchFlag=-2,a}if(rl(e)&&(e=e.__vccOpts),t){t=Yi(t);let{class:a,style:u}=t;a&&!me(a)&&(t.class=jt(a)),ce(u)&&(bo(u)&&!H(u)&&(u=Te({},u)),t.style=xt(u))}const i=me(e)?1:Zs(e)?128:ti(e)?64:ce(e)?4:z(e)?2:0;return p(e,t,n,o,s,i,r,!0)}function Yi(e){return e?bo(e)||Vs(e)?Te({},e):e:null}function Nt(e,t,n=!1,o=!1){const{props:s,ref:r,patchFlag:i,children:a,transition:u}=e,h=t?Gi(s||{},t):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&tr(h),ref:t&&t.ref?n&&r?H(r)?r.concat(mn(t)):[r,mn(t)]:mn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==st?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nt(e.ssContent),ssFallback:e.ssFallback&&Nt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&o&&yo(f,u.clone(f)),f}function sn(e=" ",t=0){return Ne(Fn,null,e,t)}function No(e,t){const n=Ne(gn,null,e);return n.staticCount=t,n}function je(e="",t=!1){return t?(ae(),It(ht,null,e)):Ne(ht,null,e)}function Je(e){return e==null||typeof e=="boolean"?Ne(ht):H(e)?Ne(st,null,e.slice()):er(e)?dt(e):Ne(Fn,null,String(e))}function dt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nt(e)}function Co(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(H(t))n=16;else if(typeof t=="object")if(o&65){const s=t.default;s&&(s._c&&(s._d=!1),Co(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Vs(t)?t._ctx=De:s===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else z(t)?(t={default:t,_ctx:De},n=32):(t=String(t),o&64?(n=16,t=[sn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gi(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const s in o)if(s==="class")t.class!==o.class&&(t.class=jt([t.class,o.class]));else if(s==="style")t.style=xt([t.style,o.style]);else if(Mn(s)){const r=t[s],i=o[s];i&&r!==i&&!(H(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=o[s])}return t}function Ye(e,t,n,o=null){Ze(e,t,7,[n,o])}const Ji=js();let Xi=0;function Zi(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||Ji,r={uid:Xi++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Us(o,s),emitsOptions:Xs(o,s),emit:null,emitted:null,propsDefaults:se,inheritAttrs:o.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ni.bind(null,r),e.ce&&e.ce(r),r}let xe=null;const Qi=()=>xe||De;let Pn,oo;{const e=In(),t=(n,o)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(o),r=>{s.length>1?s.forEach(i=>i(r)):s[0](r)}};Pn=t("__VUE_INSTANCE_SETTERS__",n=>xe=n),oo=t("__VUE_SSR_SETTERS__",n=>rn=n)}const an=e=>{const t=xe;return Pn(e),e.scope.on(),()=>{e.scope.off(),Pn(t)}},Bo=()=>{xe&&xe.scope.off(),Pn(null)};function nr(e){return e.vnode.shapeFlag&4}let rn=!1;function el(e,t=!1,n=!1){t&&oo(t);const{props:o,children:s}=e.vnode,r=nr(e);Pi(e,o,r,t),Oi(e,s,n||t);const i=r?tl(e,t):void 0;return t&&oo(!1),i}function tl(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,mi);const{setup:o}=n;if(o){lt();const s=e.setupContext=o.length>1?ol(e):null,r=an(e),i=ln(o,e,0,[e.props,s]),a=ss(i);if(at(),r(),(a||e.sp)&&!Jt(e)&&As(e),a){if(i.then(Bo,Bo),t)return i.then(u=>{Vo(e,u)}).catch(u=>{An(u,e,0)});e.asyncDep=i}else Vo(e,i)}else or(e)}function Vo(e,t,n){z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ce(t)&&(e.setupState=Es(t)),or(e)}function or(e,t,n){const o=e.type;e.render||(e.render=o.render||Xe);{const s=an(e);lt();try{vi(e)}finally{at(),s()}}}const nl={get(e,t){return _e(e,"get",""),e[t]}};function ol(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,nl),slots:e.slots,emit:e.emit,expose:t}}function Ln(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Es(jr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xt)return Xt[n](e)},has(t,n){return n in t||n in Xt}})):e.proxy}function sl(e,t=!0){return z(e)?e.displayName||e.name:e.name||t&&e.__name}function rl(e){return z(e)&&"__vccOpts"in e}const We=(e,t)=>qr(e,t,rn),il="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let so;const Ho=typeof window<"u"&&window.trustedTypes;if(Ho)try{so=Ho.createPolicy("vue",{createHTML:e=>e})}catch{}const sr=so?e=>so.createHTML(e):e=>e,ll="http://www.w3.org/2000/svg",al="http://www.w3.org/1998/Math/MathML",ot=typeof document<"u"?document:null,Uo=ot&&ot.createElement("template"),cl={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const s=t==="svg"?ot.createElementNS(ll,e):t==="mathml"?ot.createElementNS(al,e):n?ot.createElement(e,{is:n}):ot.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>ot.createTextNode(e),createComment:e=>ot.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ot.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,r){const i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Uo.innerHTML=sr(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const a=Uo.content;if(o==="svg"||o==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ul=Symbol("_vtc");function fl(e,t,n){const o=e[ul];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const En=Symbol("_vod"),rr=Symbol("_vsh"),ut={name:"show",beforeMount(e,{value:t},{transition:n}){e[En]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ut(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Ut(e,!0),o.enter(e)):o.leave(e,()=>{Ut(e,!1)}):Ut(e,t))},beforeUnmount(e,{value:t}){Ut(e,t)}};function Ut(e,t){e.style.display=t?e[En]:"none",e[rr]=!t}const dl=Symbol(""),pl=/(?:^|;)\s*display\s*:/;function hl(e,t,n){const o=e.style,s=me(n);let r=!1;if(n&&!s){if(t)if(me(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&vn(o,a,"")}else for(const i in t)n[i]==null&&vn(o,i,"");for(const i in n)i==="display"&&(r=!0),vn(o,i,n[i])}else if(s){if(t!==n){const i=o[dl];i&&(n+=";"+i),o.cssText=n,r=pl.test(n)}}else t&&e.removeAttribute("style");En in e&&(e[En]=r?o.display:"",e[rr]&&(o.display="none"))}const zo=/\s*!important$/;function vn(e,t,n){if(H(n))n.forEach(o=>vn(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=gl(e,t);zo.test(n)?e.setProperty(mt(o),n.replace(zo,""),"important"):e[o]=n}}const Wo=["Webkit","Moz","ms"],Wn={};function gl(e,t){const n=Wn[t];if(n)return n;let o=Be(t);if(o!=="filter"&&o in e)return Wn[t]=o;o=kn(o);for(let s=0;s<Wo.length;s++){const r=Wo[s]+o;if(r in e)return Wn[t]=r}return t}const Ko="http://www.w3.org/1999/xlink";function qo(e,t,n,o,s,r=gr(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ko,t.slice(6,t.length)):e.setAttributeNS(Ko,t,n):n==null||r&&!as(n)?e.removeAttribute(t):e.setAttribute(t,r?"":gt(n)?String(n):n)}function Yo(e,t,n,o,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?sr(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=as(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(s||t)}function At(e,t,n,o){e.addEventListener(t,n,o)}function ml(e,t,n,o){e.removeEventListener(t,n,o)}const Go=Symbol("_vei");function vl(e,t,n,o,s=null){const r=e[Go]||(e[Go]={}),i=r[t];if(o&&i)i.value=o;else{const[a,u]=bl(t);if(o){const h=r[t]=_l(o,s);At(e,a,h,u)}else i&&(ml(e,a,i,u),r[t]=void 0)}}const Jo=/(?:Once|Passive|Capture)$/;function bl(e){let t;if(Jo.test(e)){t={};let o;for(;o=e.match(Jo);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mt(e.slice(2)),t]}let Kn=0;const wl=Promise.resolve(),yl=()=>Kn||(wl.then(()=>Kn=0),Kn=Date.now());function _l(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ze(xl(o,n.value),t,5,[o])};return n.value=e,n.attached=yl(),n}function xl(e,t){if(H(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}const Xo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Cl=(e,t,n,o,s,r)=>{const i=s==="svg";t==="class"?fl(e,o,i):t==="style"?hl(e,n,o):Mn(t)?io(t)||vl(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Sl(e,t,o,i))?(Yo(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qo(e,t,o,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!me(o))?Yo(e,Be(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),qo(e,t,o,i))};function Sl(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Xo(t)&&z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Xo(t)&&me(n)?!1:t in e}const Zo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return H(t)?n=>dn(t,n):t};function Pl(e){e.target.composing=!0}function Qo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const qn=Symbol("_assign"),El={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e[qn]=Zo(s);const r=o||s.props&&s.props.type==="number";At(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Yn(a)),e[qn](a)}),n&&At(e,"change",()=>{e.value=e.value.trim()}),t||(At(e,"compositionstart",Pl),At(e,"compositionend",Qo),At(e,"change",Qo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:s,number:r}},i){if(e[qn]=Zo(i),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Yn(e.value):e.value,u=t??"";a!==u&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||s&&e.value.trim()===u)||(e.value=u))}},Ml={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Tl=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=s=>{if(!("key"in s))return;const r=mt(s.key);if(t.some(i=>i===r||Ml[i]===r))return e(s)})},Ol=Te({patchProp:Cl},cl);let es;function kl(){return es||(es=Ii(Ol))}const Il=(...e)=>{const t=kl().createApp(...e),{mount:n}=t;return t.mount=o=>{const s=Dl(o);if(!s)return;const r=t._component;!z(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,Al(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t};function Al(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Dl(e){return me(e)?document.querySelector(e):e}const Qe=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Rl={name:"LandingPage",emits:["start-camera"],setup(e,{emit:t}){const n=F("");return{userName:n,startCamera:()=>{n.value.trim()&&t("start-camera",n.value.trim())}}}},Fl={class:"landing-page min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-amber-900 relative overflow-hidden"},Ll={class:"relative z-10 min-h-screen flex flex-col justify-center items-center px-6 py-12 text-center text-white"},$l={class:"mb-12"},jl={class:"mb-8"},Nl={class:"w-64 mx-auto"},Bl=["disabled"];function Vl(e,t,n,o,s,r){return ae(),ge("div",Fl,[t[9]||(t[9]=p("div",{class:"absolute inset-0 bg-black/20"},null,-1)),t[10]||(t[10]=p("div",{class:"absolute inset-0 flex items-center justify-center opacity-30"},[p("div",{class:"w-full h-full bg-gradient-to-t from-black/60 to-transparent"})],-1)),p("div",Ll,[t[6]||(t[6]=p("div",{class:"mb-8"},[p("h1",{class:"text-4xl md:text-5xl font-bold mb-4 leading-tight"},[sn(" 珍藏賞月中的"),p("br"),sn("珍貴影像 ")])],-1)),p("div",$l,[t[4]||(t[4]=p("p",{class:"text-xl md:text-2xl mb-6 opacity-90"}," 月下共頻的畫面來自 ",-1)),p("div",jl,[p("div",Nl,[nt(p("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.userName=i),type:"text",placeholder:"車主名稱",class:"w-full px-2 py-3 text-lg text-center bg-transparent border-none text-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 transition-all",onKeyup:t[1]||(t[1]=Tl((...i)=>o.startCamera&&o.startCamera(...i),["enter"]))},null,544),[[El,o.userName]]),t[3]||(t[3]=p("div",{class:"h-px bg-gradient-to-r from-transparent via-white/50 to-transparent mt-2"},null,-1))])])]),t[7]||(t[7]=p("div",{class:"mb-12"},[p("p",{class:"text-lg md:text-xl mb-2 opacity-90"}," 為你的探月護照 "),p("p",{class:"text-lg md:text-xl opacity-90"}," 拍一張追月時的旅程照片 ")],-1)),p("button",{onClick:t[2]||(t[2]=(...i)=>o.startCamera&&o.startCamera(...i)),disabled:!o.userName.trim(),class:jt(["px-16 py-3 text-base font-normal rounded-none flex items-center justify-center gap-2 min-w-[280px]",{"cursor-not-allowed":!o.userName.trim()}]),style:{"background-color":"#ffffff !important",color:"#000000 !important",border:"none !important",opacity:"1 !important"}},[...t[5]||(t[5]=[p("span",null,"開啟相機",-1),p("span",{class:"text-lg"},">",-1)])],10,Bl),t[8]||(t[8]=p("div",{class:"mt-16"},null,-1))])])}const Hl=Qe(Rl,[["render",Vl],["__scopeId","data-v-83bb82dc"]]),Ul={name:"AppHeader",props:{status:{type:String,default:"尚未啟動"},mobileMenuOpen:{type:Boolean,default:!1}},emits:["toggle-menu"]},zl={class:"flex items-center justify-between px-4 py-3 border-b border-app-border"},Wl={class:"flex items-center gap-3"},Kl={class:"text-app-muted text-sm"};function ql(e,t,n,o,s,r){return ae(),ge("header",zl,[t[1]||(t[1]=p("h1",{class:"text-base font-medium m-0"}," Range Rover 月相節 - MediaPipe ver:1.4 (Vue.js版本) ",-1)),p("div",Wl,[p("button",{onClick:t[0]||(t[0]=i=>e.$emit("toggle-menu")),class:"lg:hidden inline-flex items-center justify-center px-3 py-2 rounded-lg border border-app-button-border bg-app-button text-app-fg hover:bg-opacity-80 transition-all","aria-label":"切換側欄"}," ☰ "),p("span",Kl,ye(n.status),1)])])}const Yl=Qe(Ul,[["render",ql]]),Gl={name:"ControlPanel",props:{cameraRunning:Boolean,segmentationEnabled:Boolean,showMask:Boolean,backgroundType:String,effectIntensity:Number,edgeFeather:Number,temporalSmooth:Number,threshold:Number,faceCount:Number,facesInArea:Number},emits:["start-camera","stop-camera","switch-camera","update-segmentation","update-show-mask","update-background-type","update-effect-intensity","update-edge-feather","update-temporal-smooth","update-threshold","test-mov-background"]},Jl={class:"p-4"},Xl={class:"panel mb-5"},Zl={class:"flex gap-2 mb-2"},Ql=["disabled"],ea=["disabled"],ta=["disabled"],na={class:"panel mb-5"},oa={class:"space-y-2"},sa={class:"flex items-center gap-2 cursor-pointer"},ra=["checked"],ia={class:"flex items-center gap-2 cursor-pointer"},la=["checked"],aa={class:"flex items-center justify-between gap-2"},ca={class:"flex items-center gap-2"},ua=["value"],fa={class:"text-xs text-app-muted min-w-[3rem]"},da={class:"flex items-center justify-between gap-2"},pa={class:"flex items-center gap-2"},ha=["value"],ga={class:"text-xs text-app-muted min-w-[3rem]"},ma={class:"flex items-center justify-between gap-2"},va={class:"flex items-center gap-2"},ba=["value"],wa={class:"text-xs text-app-muted min-w-[3rem]"},ya={class:"panel mb-5"},_a=["value"],xa={key:0,class:"space-y-2 mb-3 p-3 bg-app-surface rounded-lg"},Ca={class:"flex items-center justify-between gap-2"},Sa={class:"flex items-center gap-2"},Pa=["value"],Ea={class:"text-xs text-app-muted min-w-[3rem]"},Ma={class:"panel mb-5"},Ta={class:"space-y-2"},Oa={class:"flex items-center justify-between"},ka={class:"px-2 py-1 bg-app-surface border border-app-border rounded-full text-xs"},Ia={class:"flex items-center justify-between"},Aa={class:"px-2 py-1 bg-app-surface border border-app-border rounded-full text-xs"},Da={class:"panel mb-5"};function Ra(e,t,n,o,s,r){return ae(),ge("aside",Jl,[p("div",Xl,[t[11]||(t[11]=p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 啟動 / 鏡頭 ",-1)),p("div",Zl,[p("button",{onClick:t[0]||(t[0]=i=>e.$emit("start-camera")),disabled:n.cameraRunning,class:"flex-1 px-3 py-2 text-sm rounded-lg border border-app-button-border bg-app-button text-app-fg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-opacity-80 transition-all"},ye(n.cameraRunning?"運行中":"開始"),9,Ql),p("button",{onClick:t[1]||(t[1]=i=>e.$emit("stop-camera")),disabled:!n.cameraRunning,class:"flex-1 px-3 py-2 text-sm rounded-lg border border-app-button-border bg-app-button text-app-fg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-opacity-80 transition-all"}," 停止 ",8,ea)]),p("button",{onClick:t[2]||(t[2]=i=>e.$emit("switch-camera")),disabled:!n.cameraRunning,class:"w-full px-3 py-2 text-sm rounded-lg border border-app-button-border bg-app-button text-app-fg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-opacity-80 transition-all"}," 切換前/後鏡頭 ",8,ta),t[12]||(t[12]=p("div",{class:"text-xs text-app-muted mt-2"}," 若 GPU 不可用會自動回退至 CPU。 ",-1))]),p("div",na,[t[18]||(t[18]=p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 分割設定 ",-1)),p("div",oa,[p("label",sa,[p("input",{type:"checkbox",checked:n.segmentationEnabled,onChange:t[3]||(t[3]=i=>e.$emit("update-segmentation",i.target.checked)),class:"rounded border-gray-600 bg-gray-700 text-app-accent"},null,40,ra),t[13]||(t[13]=p("span",{class:"text-sm"},"啟用去背",-1))]),p("label",ia,[p("input",{type:"checkbox",checked:n.showMask,onChange:t[4]||(t[4]=i=>e.$emit("update-show-mask",i.target.checked)),class:"rounded border-gray-600 bg-gray-700 text-app-accent"},null,40,la),t[14]||(t[14]=p("span",{class:"text-sm"},"顯示蒙版預覽",-1))]),p("div",aa,[t[15]||(t[15]=p("label",{class:"text-sm min-w-0"},"邊緣羽化",-1)),p("div",ca,[p("input",{type:"range",min:"0",max:"8",step:"1",value:n.edgeFeather,onInput:t[5]||(t[5]=i=>e.$emit("update-edge-feather",parseInt(i.target.value))),class:"w-32 lg:w-36"},null,40,ua),p("span",fa,ye(n.edgeFeather)+" px",1)])]),p("div",da,[t[16]||(t[16]=p("label",{class:"text-sm min-w-0"},"時間平滑",-1)),p("div",pa,[p("input",{type:"range",min:"0",max:"95",step:"1",value:Math.round(n.temporalSmooth*100),onInput:t[6]||(t[6]=i=>e.$emit("update-temporal-smooth",parseInt(i.target.value)/100)),class:"w-32 lg:w-36"},null,40,ha),p("span",ga,ye(n.temporalSmooth.toFixed(2)),1)])]),p("div",ma,[t[17]||(t[17]=p("label",{class:"text-sm min-w-0"},"閾值",-1)),p("div",va,[p("input",{type:"range",min:"0",max:"100",step:"1",value:Math.round(n.threshold*100),onInput:t[7]||(t[7]=i=>e.$emit("update-threshold",parseInt(i.target.value)/100)),class:"w-32 lg:w-36"},null,40,ba),p("span",wa,ye(n.threshold.toFixed(2)),1)])])])]),p("div",ya,[t[22]||(t[22]=p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 背景 ",-1)),p("select",{value:n.backgroundType,onChange:t[8]||(t[8]=i=>e.$emit("update-background-type",i.target.value)),class:"w-full px-3 py-2 rounded-lg border border-app-button-border bg-app-button text-app-fg mb-2"},[...t[19]||(t[19]=[No('<option value="original">原始</option><option value="waves">波紋</option><option value="frequency">頻率條</option><option value="video">影片（MP4/WebM）</option><option value="moon_video">月相影片 🌙</option><option value="custom_moon_bg">自定義背景 + 圓形月亮 ✨</option>',6)])],40,_a),t[23]||(t[23]=p("div",{class:"text-xs text-app-muted mb-3"}," 背景來源：MP4 影片 / 月相影片（8秒動態錄製）/ 自定義背景+圓形月亮合成 ",-1)),n.backgroundType==="moon_video"?(ae(),ge("div",xa,[...t[20]||(t[20]=[No('<div class="text-sm font-medium">影片格式:</div><div class="flex gap-3"><label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="videoFormat" value="mp4" checked class="text-app-accent"><span class="text-sm">MP4 (推薦)</span></label><label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="videoFormat" value="webm" class="text-app-accent"><span class="text-sm">WebM</span></label></div><div class="text-xs text-app-accent"> MP4：相容性佳，檔案較大｜WebM：檔案較小，部分裝置不支援 </div>',3)])])):je("",!0),p("div",Ca,[t[21]||(t[21]=p("label",{class:"text-sm min-w-0"},"特效強度",-1)),p("div",Sa,[p("input",{type:"range",min:"0",max:"100",value:Math.round(n.effectIntensity*100),onInput:t[9]||(t[9]=i=>e.$emit("update-effect-intensity",parseInt(i.target.value)/100)),class:"w-32 lg:w-36"},null,40,Pa),p("span",Ea,ye(Math.round(n.effectIntensity*100))+"%",1)])])]),p("div",Ma,[t[26]||(t[26]=p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 統計 ",-1)),p("div",Ta,[p("div",Oa,[t[24]||(t[24]=p("span",{class:"text-sm text-app-muted"},"偵測人臉：",-1)),p("span",ka,ye(n.faceCount),1)]),p("div",Ia,[t[25]||(t[25]=p("span",{class:"text-sm text-app-muted"},"區域內人臉：",-1)),p("span",Aa,ye(n.facesInArea),1)])])]),p("div",Da,[t[27]||(t[27]=p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 測試功能 ",-1)),p("button",{onClick:t[10]||(t[10]=i=>e.$emit("test-mov-background")),class:"w-full px-3 py-2 text-sm rounded-lg border border-app-button-border bg-red-600 text-white hover:bg-red-700 transition-all"}," 🧪 測試 MOV 背景 + 人像去背 ")]),t[28]||(t[28]=p("div",{class:"panel"},[p("h3",{class:"text-xs text-app-muted uppercase tracking-wider mb-2 font-medium"}," 快捷鍵 "),p("div",{class:"text-xs text-app-muted"}," 空白鍵：開始/停止 · C：切換鏡頭 · P：拍照 ")],-1))])}const Fa=Qe(Gl,[["render",Ra]]),La={name:"CameraStage",props:{backgroundType:{type:String,default:""},isIOSDevice:{type:Boolean,default:!1},showControls:{type:Boolean,default:!0},cameraRunning:{type:Boolean,default:!1}},emits:["capture-photo","share-video","download-video"],setup(e){const{showControls:t,cameraRunning:n}=Ur(e),o=F(null),s=F(null),r=F(null),i=F(null),a=F(null),u=F(!1),h=F(!1),f=F(!0),g=F(!0),y=We(()=>"/range_rover_moon_fastival_public/");return nn(()=>{if(setTimeout(()=>{g.value=!1,setTimeout(()=>{f.value=!1},500)},1e4),a.value){const M="/range_rover_moon_fastival_public/";a.value.src=M+"moon_alpha_ios.mov",console.log("🎬 CameraStage moonVideo 設置完成:",{src:a.value.src,element:a.value,isVisible:getComputedStyle(a.value).display!=="none"})}}),{stage:o,bgCanvas:s,maskCanvas:r,outputCanvas:i,moonVideo:a,showShareButton:u,showDownloadButton:h,showHintText:f,hintVisible:g,basePath:y,backgroundType:e.backgroundType,isIOSDevice:e.isIOSDevice,showControls:t,cameraRunning:n}}},$a={ref:"stage",class:"stage fixed inset-0 bg-gray-900 overflow-hidden w-[100dvw] h-[100dvh]",style:{width:"100dvw",height:"100dvh"}},ja={ref:"bgCanvas",class:"bg_canvas absolute inset-0 block w-full h-full z-[5]"},Na={ref:"maskCanvas",class:"mask_canvas absolute inset-0 block w-full h-full z-[10]"},Ba={class:"absolute inset-0 pointer-events-none z-[10]"},Va={ref:"moonVideo",class:"w-full h-full object-contain force-composite",autoplay:"",loop:"",muted:"",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none",background:"transparent"}},Ha={class:"absolute inset-0 flex items-center justify-center z-[120] bg-gray-900 bg-opacity-80"},Ua=["src"],za={class:"absolute right-4 bottom-8 z-[110] flex flex-col gap-2"};function Wa(e,t,n,o,s,r){return ae(),ge("section",$a,[p("canvas",ja,null,512),p("canvas",Na,null,512),p("div",Ba,[nt(p("video",Va,null,512),[[ut,o.isIOSDevice&&o.cameraRunning&&["moon_video","custom_moon_bg","person_overlay"].includes(o.backgroundType)]])]),p("canvas",{ref:"outputCanvas",class:jt(["output_canvas absolute inset-0 block w-full h-full",o.showControls?"z-[100]":"z-[10]"])},null,2),nt(p("div",Ha,[...t[3]||(t[3]=[p("div",{class:"text-center text-white"},[p("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),p("p",{class:"text-lg"},"相機啟動中...")],-1)])],512),[[ut,o.showControls&&!o.cameraRunning]]),nt(p("button",{onClick:t[0]||(t[0]=i=>e.$emit("capture-photo")),class:"absolute bottom-12 left-1/2 -translate-x-1/2 z-[110] w-20 h-20 flex items-center justify-center"},[p("img",{src:o.basePath+"shutter.png",alt:"拍照",class:"w-26 h-26"},null,8,Ua)],512),[[ut,o.showControls&&o.cameraRunning]]),nt(p("div",{class:jt(["absolute bottom-4 left-1/2 -translate-x-1/2 z-[110] text-white text-sm text-center transition-opacity duration-500",{"opacity-0":!o.hintVisible}])}," 對準臉部拍照可解鎖彩蛋 ",2),[[ut,o.showControls&&o.cameraRunning&&o.showHintText]]),nt(p("div",za,[nt(p("button",{onClick:t[1]||(t[1]=i=>e.$emit("share-video")),class:"px-3 py-2 rounded-xl border border-app-button-border bg-app-button text-app-fg hover:bg-opacity-80 transition-all text-sm"}," 🔗 分享影片 ",512),[[ut,o.showShareButton]]),nt(p("button",{onClick:t[2]||(t[2]=i=>e.$emit("download-video")),class:"px-3 py-2 rounded-xl border border-app-button-border bg-app-button text-app-fg hover:bg-opacity-80 transition-all text-sm"}," ⬇️ 下載影片 ",512),[[ut,o.showDownloadButton]])],512),[[ut,o.showControls]])],512)}const Ka=Qe(La,[["render",Wa]]),qa={name:"StatusBar",props:{status:{type:String,default:"Idle"}}},Ya={class:"flex items-center gap-4 px-4 py-3 border-t border-app-border min-h-[48px]"},Ga={class:"text-sm"};function Ja(e,t,n,o,s,r){return ae(),ge("div",Ya,[p("span",Ga,[t[0]||(t[0]=sn(" 狀態：",-1)),p("strong",null,ye(n.status),1)]),t[1]||(t[1]=p("span",{class:"text-sm"},[sn(" 模式："),p("span",{class:"px-2 py-1 bg-app-surface border border-app-border rounded-full text-xs"},"VIDEO")],-1))])}const Xa=Qe(qa,[["render",Ja]]),Za={name:"LoadingModal",props:{message:{type:String,default:"載入中..."}}},Qa={class:"fixed inset-0 bg-app-bg bg-opacity-90 flex flex-col items-center justify-center z-[9999] backdrop-blur"},ec={class:"text-app-fg text-center max-w-sm px-5"};function tc(e,t,n,o,s,r){return ae(),ge("div",Qa,[t[0]||(t[0]=p("div",{class:"animate-spin w-10 h-10 border-3 border-app-accent border-opacity-30 border-t-app-accent rounded-full mb-4"},null,-1)),p("div",ec,ye(n.message),1)])}const nc=Qe(Za,[["render",tc]]),oc={name:"ProgressModal",props:{progress:{type:Object,default:()=>({percent:0,current:0,total:8})},status:{type:String,default:"準備錄製..."},showControls:{type:Boolean,default:!1}},emits:["close","share","download"],setup(e){const t=We(()=>{var o;return Math.round(((o=e.progress)==null?void 0:o.percent)||0)}),n=We(()=>{var r,i;const o=((r=e.progress)==null?void 0:r.current)||0,s=((i=e.progress)==null?void 0:i.total)||8;return`${o.toFixed(1)}s / ${s.toFixed(1)}s`});return{progressPercent:t,progressTime:n}}},sc={class:"fixed inset-0 flex items-center justify-center z-[10001] backdrop-blur-sm"},rc={class:"bg-app-bg bg-opacity-95 border-2 border-app-accent rounded-xl p-5 w-[min(92vw,420px)] text-center shadow-2xl"},ic={class:"mb-3"},lc={class:"bg-white bg-opacity-10 h-3 rounded-full overflow-hidden"},ac={class:"text-app-accent font-bold mt-2"},cc={class:"text-app-muted text-sm mt-1"},uc={class:"text-app-muted text-sm mb-4"},fc={class:"flex gap-2 justify-center"};function dc(e,t,n,o,s,r){return ae(),ge("div",sc,[p("div",rc,[t[3]||(t[3]=p("h3",{class:"text-lg text-app-accent font-medium mb-2"}," 🎬 錄製月相影片中 ",-1)),t[4]||(t[4]=p("div",{class:"text-sm text-app-muted mb-3"}," 靜止人物 + 動態月相背景 ",-1)),p("div",ic,[p("div",lc,[p("div",{class:"h-full bg-gradient-to-r from-app-accent to-yellow-600 transition-all duration-300",style:xt({width:o.progressPercent+"%"})},null,4)]),p("div",ac,ye(n.status),1),p("div",cc,ye(o.progressTime),1)]),p("div",uc,ye(n.showControls?"影片已生成：可直接分享或下載（建議先分享）":"影片生成後會顯示分享與下載按鈕"),1),p("div",fc,[n.showControls?(ae(),ge("button",{key:0,onClick:t[0]||(t[0]=i=>e.$emit("download")),class:"px-3 py-2 rounded-lg border border-app-border bg-app-bg text-app-fg hover:bg-opacity-80 transition-all"}," ⬇ 下載 ")):je("",!0),n.showControls?(ae(),ge("button",{key:1,onClick:t[1]||(t[1]=i=>e.$emit("share")),class:"px-3 py-2 rounded-lg border border-app-border bg-app-accent text-app-bg hover:bg-opacity-80 transition-all"}," 🔗 分享 ")):je("",!0),p("button",{onClick:t[2]||(t[2]=i=>e.$emit("close")),class:"px-3 py-2 rounded-lg border border-app-border bg-transparent text-app-muted hover:bg-opacity-80 transition-all"}," 關閉 ")])])])}const pc=Qe(oc,[["render",dc]]),hc={name:"PhotoPreview",props:{originalImageData:{type:[String,Object],required:!0},availableBackgrounds:{type:Array,required:!0},selectedBackground:{type:String,required:!0},userName:{type:String,default:""}},emits:["close","background-change"],setup(e,{emit:t}){const n=F(null),o=F(null),s=F(null),r=F(null),i=F(null),a=F(null),u=F(null),h=F(!1),f=F(0),g=We(()=>"/range_rover_moon_fastival_public/"),y=We(()=>e.availableBackgrounds[f.value]||e.availableBackgrounds[0]),M=.06,N=.182,R=.695,re=.53,W=.695,G=18,K=F({w:0,h:0}),$=()=>{K.value.w=window.innerWidth||0,K.value.h=window.innerHeight||0};nn(()=>{$(),window.addEventListener("resize",$)}),Cn(()=>{window.removeEventListener("resize",$)});const Q=F(null),ue=F({w:0,h:0}),ve=S=>{const T=(S==null?void 0:S.target)||Q.value;T&&(ue.value={w:T.naturalWidth||0,h:T.naturalHeight||0},$())},we=We(()=>{const S=new Date,T=S.getFullYear(),j=String(S.getMonth()+1).padStart(2,"0"),U=String(S.getDate()).padStart(2,"0");return`${T}.${j}.${U}`}),Ve=We(()=>{var x;const S=(x=y.value)==null?void 0:x.contentArea;if(!S)return{};const T=y.value.moonScale||1,j=K.value.w,U=K.value.h,O=S.width*j,X=S.height*U,l=S.x*j,c=S.y*U,d=O*T,m=X*T,v=l-(d-O)/2,b=c-(m-X)/2;return{left:`${v}px`,top:`${b+U*M}px`,width:`${d}px`,height:`${m}px`}}),Oe=We(()=>{const S=K.value.w,T=K.value.h,j=ue.value.w,U=ue.value.h,O=Le(S,T,j,U),X=O.x+O.w*N,l=O.y+O.h*R;return{position:"absolute",top:0,left:0,transform:`translate(${X}px, ${l}px)`,fontSize:`${G}px`,whiteSpace:"nowrap",textShadow:"0 1px 2px rgba(0,0,0,.6)"}}),Fe=We(()=>{const S=K.value.w,T=K.value.h,j=ue.value.w,U=ue.value.h,O=Le(S,T,j,U),X=O.x+O.w*re,l=O.y+O.h*W;return{position:"absolute",top:0,left:0,transform:`translate(${X}px, ${l}px)`,fontSize:`${G}px`,whiteSpace:"nowrap",textShadow:"0 1px 2px rgba(0,0,0,.6)"}}),He=S=>{console.warn("框架圖片載入失敗:",S.target.src)},Ue=async()=>{f.value=(f.value+1)%e.availableBackgrounds.length,t("background-change",y.value.id),await le()},I=async()=>{if(!n.value||!s.value||!r.value){console.error("Canvas 或影片元素未準備好");return}try{h.value=!0,await le(),r.value.play()}catch(S){console.error("預覽初始化失敗:",S)}finally{h.value=!1}},le=async()=>{var X;const S=n.value.getContext("2d"),T=s.value.getContext("2d"),j=window.innerWidth,U=window.innerHeight;if(n.value.width=s.value.width=j,n.value.height=s.value.height=U,console.log("📐 Canvas 尺寸設定:",j,"x",U),(X=y.value)!=null&&X.src)try{const l=new Image;l.src=g.value+y.value.src,await new Promise((c,d)=>{l.onload=c,l.onerror=d}),console.log("🖼️ 背景圖片載入成功:",y.value.src),S.drawImage(l,0,0,j,U)}catch(l){console.error("🖼️ 背景圖片載入失敗:",l),S.fillStyle="#1a1a1a",S.fillRect(0,0,j,U)}else S.fillStyle="#1a1a1a",S.fillRect(0,0,j,U);T.clearRect(0,0,j,U);let O=e.originalImageData;if(typeof O=="object"&&O.segmentedImageData?(O=O.segmentedImageData,console.log("🎭 使用去背後的人像數據")):typeof O=="object"&&O.originalImageData?(O=O.originalImageData,console.log("📷 使用原始人像數據")):typeof O=="string"&&console.log("📷 使用字符串格式的人像數據"),O)try{const l=new Image;l.src=O,await new Promise((V,q)=>{l.onload=V,l.onerror=q});const c=y.value.contentArea||{x:0,y:0,width:1,height:1},d=c.x*j,m=c.y*U,v=c.width*j,b=c.height*U,x=l.naturalWidth,P=l.naturalHeight,C=x/P,w=v/b;let A,E,k,L;C>w?(A=v,E=A/C,k=d,L=m+(b-E)/2):(E=b,A=E*C,k=d+(v-A)/2,L=m),console.log("🎭 人像繪製（等比例縮小，完整顯示）:",{contentArea:{contentX:d,contentY:m,contentWidth:v,contentHeight:b},draw:{drawX:k,drawY:L,drawWidth:A,drawHeight:E},scale:A/x,outputCanvasZIndex:getComputedStyle(s.value).zIndex}),T.globalCompositeOperation="source-over",T.drawImage(l,k,L,A,E),console.log("✅ PhotoPreview 人像已繪製到 outputCanvas（透明背景，月亮可透出）")}catch(l){console.error("🎭 人像圖片載入失敗:",l)}},J=async()=>{var S,T,j,U;h.value=!0;try{const O=Math.round(window.innerWidth),X=Math.round(window.innerHeight),l=Math.min(window.devicePixelRatio||1,2),c=document.createElement("canvas");c.width=Math.round(O*l),c.height=Math.round(X*l);const d=c.getContext("2d");d.scale(l,l);const m=c.captureStream(30),v=ee(["video/mp4;codecs=h264","video/mp4","video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"]);if(!v)throw new Error("此瀏覽器不支援 MediaRecorder 錄製影片");const b=[],x=new MediaRecorder(m,{mimeType:v,videoBitsPerSecond:6e6});x.ondataavailable=$e=>$e.data&&$e.data.size&&b.push($e.data);const P=new Promise($e=>{x.onstop=()=>{const he=v.includes("mp4")?"video/mp4":"video/webm",Se=new Blob(b,{type:he}),oe=URL.createObjectURL(Se);$e({blob:Se,url:oe,mime:he})}}),C=await B((S=y.value)!=null&&S.src?g.value+y.value.src:null);let w=e.originalImageData;typeof w=="object"&&(w!=null&&w.segmentedImageData)?w=w.segmentedImageData:typeof w=="object"&&(w!=null&&w.originalImageData)&&(w=w.originalImageData);const A=await B(w),E=await B((T=y.value)!=null&&T.frame?g.value+y.value.frame:null),k=r.value;await fe(k);try{await k.play()}catch{}const L=((j=y.value)==null?void 0:j.contentArea)||{x:0,y:0,width:1,height:1},V={x:L.x*O,y:L.y*X,w:L.width*O,h:L.height*X},q=((U=y.value)==null?void 0:U.moonScale)||1,Y=V.w,pe=V.h,de={w:Y*q,h:pe*q,x:V.x-Y*(q-1)/2,y:V.y-pe*(q-1)/2};de.y+=X*M,x.start(100);const ke=performance.now();Pt(d,O,X,{bgImg:C,frameImg:E,personImg:A,moonVid:k,personRect:V,moonRect:de});const Ce=()=>{const $e=performance.now();Pt(d,O,X,{bgImg:C,frameImg:E,personImg:A,moonVid:k,personRect:V,moonRect:de}),$e-ke<5e3?requestAnimationFrame(Ce):x.stop()};return requestAnimationFrame(Ce),await P}catch(O){throw console.error("影片生成失敗：",O),O}finally{h.value=!1}},_=async()=>{try{const S=await J(),T=document.createElement("a");T.download=`range_rover_preview_${Date.now()}${S.mime.includes("mp4")?".mp4":".webm"}`,T.href=S.url,T.click(),setTimeout(()=>{try{URL.revokeObjectURL(S.url)}catch{}},5e3)}catch(S){console.error("下載失敗：",S),alert("影片下載失敗，請重試")}},D=async()=>{var S;try{const T=await J(),j=`range_rover_preview${T.mime.includes("mp4")?".mp4":".webm"}`,U=new File([T.blob],j,{type:T.mime});if(navigator.share&&((S=navigator.canShare)!=null&&S.call(navigator,{files:[U]})))await navigator.share({files:[U],title:"Range Rover 月圓節影片",text:"我的月圓節影片"});else{const O=document.createElement("a");O.href=T.url,O.download=j,O.click(),setTimeout(()=>{try{URL.revokeObjectURL(T.url)}catch{}},5e3)}}catch(T){console.error("分享失敗：",T),alert("無法分享，已改為下載影片");try{await _()}catch{}}},ee=S=>{for(const T of S)try{if(MediaRecorder.isTypeSupported(T))return T}catch{}return""},fe=S=>new Promise(T=>{if(!S||S.readyState>=2)return T();const j=()=>{U(),T()},U=()=>{S.removeEventListener("loadeddata",j),S.removeEventListener("canplay",j)};S.addEventListener("loadeddata",j,{once:!0}),S.addEventListener("canplay",j,{once:!0})}),B=S=>new Promise(T=>{if(!S)return T(null);const j=new Image;j.crossOrigin="anonymous",j.onload=()=>T(j),j.onerror=()=>T(null),j.src=S}),ne=(S,T,j,U,O,X,l,c)=>{const d=T.videoWidth||T.naturalWidth||O,m=T.videoHeight||T.naturalHeight||X;if(!d||!m)return;const v=Math.min(O/d,X/m),b=d*v,x=m*v,P=j+(O-b)/2,C=U+(X-x)/2;try{S.drawImage(T,0,0,d,m,P,C,b,x)}catch{}},Le=(S,T,j,U)=>{if(!S||!T||!j||!U)return{x:0,y:0,w:S,h:T};const O=Math.max(S/j,T/U),X=j*O,l=U*O,c=(S-X)/2,d=(T-l)/2;return{x:c,y:d,w:X,h:l}},Bt=(S,T,j,U,O,X)=>{const l=T.naturalWidth||O,c=T.naturalHeight||X;if(!l||!c)return;const d=Math.max(O/l,X/c),m=l*d,v=c*d,b=j+(O-m)/2,x=U+(X-v)/2;try{S.drawImage(T,0,0,l,c,b,x,m,v)}catch{}},Pt=(S,T,j,{bgImg:U,frameImg:O,personImg:X,moonVid:l,personRect:c,moonRect:d})=>{if(S.clearRect(0,0,T,j),U)try{S.drawImage(U,0,0,T,j)}catch{S.fillStyle="#1a1a1a",S.fillRect(0,0,T,j)}else S.fillStyle="#1a1a1a",S.fillRect(0,0,T,j);l&&l.readyState>=2&&ne(S,l,d.x,d.y,d.w,d.h),X&&ne(S,X,c.x,c.y,c.w,c.h),O&&Bt(S,O,0,0,T,j),S.font=`${G}px monospace`,S.fillStyle="#fff",S.textBaseline="top",S.textAlign="left",S.shadowColor="rgba(0,0,0,.6)",S.shadowBlur=2,S.shadowOffsetY=1;const m=Le(T,j,(O==null?void 0:O.naturalWidth)||0,(O==null?void 0:O.naturalHeight)||0),v=m.x+m.w*N,b=m.y+m.h*R;S.fillText(we.value,v,b);const x=m.x+m.w*re,P=m.y+m.h*W;S.fillText(e.userName||"Guest",x,P),S.shadowColor="transparent",S.shadowBlur=0,S.shadowOffsetY=0};return nn(()=>{Lt(()=>{u.value&&(u.value.src=g.value+"moon.mp4"),setTimeout(()=>{I()},100)})}),Cn(()=>{r.value&&!r.value.paused&&r.value.pause()}),{bgCanvas:n,maskCanvas:o,outputCanvas:s,moonVideoEl:r,videoEl:i,bgVideoEl:a,bgMoonVideoEl:u,isProcessing:h,currentBackground:y,basePath:g,contentAreaStyle:Ve,currentDate:we,dateTextStyle:Oe,nameTextStyle:Fe,switchBackground:Ue,downloadPhoto:_,sharePhoto:D,handleFrameError:He,handleFrameLoad:ve,frameImgEl:Q}}},gc={class:"fixed inset-0 bg-gray-900 overflow-hidden w-full h-full z-50"},mc={ref:"bgCanvas",class:"bg_canvas absolute inset-0 block w-full h-full z-[5]"},vc={ref:"maskCanvas",class:"mask_canvas absolute inset-0 block w-full h-full z-[10]"},bc=["src"],wc=["src"],yc=["src"],_c=["src"],xc={ref:"outputCanvas",class:"output_canvas absolute inset-0 block w-full h-full z-[20]"},Cc={class:"absolute inset-0 pointer-events-none z-[30]"},Sc=["src"],Pc={class:"absolute inset-0 pointer-events-none z-[35]"},Ec={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-30"},Mc={class:"absolute bottom-6 left-6 right-6 flex justify-between items-center z-30"},Tc={class:"flex gap-4"},Oc={class:"hidden"},kc={ref:"videoEl",class:"input_video",playsinline:""},Ic={ref:"bgVideoEl",class:"bg_video",playsinline:"",muted:"",loop:"",preload:"auto",src:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},Ac={ref:"bgMoonVideoEl",class:"bg_video",muted:"",loop:"",preload:"auto",playsinline:"",style:{display:"none"}};function Dc(e,t,n,o,s,r){return ae(),ge("section",gc,[p("canvas",mc,null,512),p("canvas",vc,null,512),p("div",{class:"absolute inset-0 pointer-events-none z-[15]",style:xt(o.contentAreaStyle)},[p("video",{ref:"moonVideoEl",class:"w-full h-full object-contain force-composite",src:o.basePath+"moon_alpha_ios.mov",autoplay:"",loop:"",muted:"",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none",background:"transparent",transform:"translateZ(0)",filter:"opacity(1)","backface-visibility":"hidden"}},[p("source",{src:o.basePath+"moon_alpha_ios.mov",type:"video/quicktime"},null,8,wc),p("source",{src:o.basePath+"moon.mp4",type:"video/mp4"},null,8,yc),p("source",{src:o.basePath+"moon.webm",type:"video/webm"},null,8,_c)],8,bc)],4),p("canvas",xc,null,512),p("div",Cc,[o.currentBackground.frame?(ae(),ge("img",{key:0,src:o.basePath+o.currentBackground.frame,ref:"frameImgEl",alt:"裝飾框架",class:"w-full h-full object-cover",style:{"pointer-events":"none"},onError:t[0]||(t[0]=(...i)=>o.handleFrameError&&o.handleFrameError(...i)),onLoad:t[1]||(t[1]=(...i)=>o.handleFrameLoad&&o.handleFrameLoad(...i))},null,40,Sc)):je("",!0)]),p("div",Pc,[p("div",{class:"absolute text-white font-mono text-lg tracking-wider",style:xt(o.dateTextStyle)},ye(o.currentDate),5),p("div",{class:"absolute text-white font-mono text-lg tracking-wider",style:xt(o.nameTextStyle)},ye(n.userName||"Guest"),5)]),p("button",{onClick:t[2]||(t[2]=(...i)=>o.switchBackground&&o.switchBackground(...i)),class:"absolute top-6 right-6 w-12 h-12 bg-black bg-opacity-60 rounded-full flex items-center justify-center text-white text-xl hover:bg-opacity-80 transition-all z-30"}," 🖼️ "),o.isProcessing?(ae(),ge("div",Ec,[...t[6]||(t[6]=[p("div",{class:"text-white text-center"},[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p("p",{class:"text-lg"},"合成中...")],-1)])])):je("",!0),p("div",Mc,[p("button",{onClick:t[3]||(t[3]=i=>e.$emit("close")),class:"w-12 h-12 bg-black bg-opacity-60 rounded-full flex items-center justify-center text-white hover:bg-opacity-80 transition-all"}," ← "),p("div",Tc,[p("button",{onClick:t[4]||(t[4]=(...i)=>o.downloadPhoto&&o.downloadPhoto(...i)),class:"w-12 h-12 bg-black bg-opacity-60 rounded-full flex items-center justify-center text-white hover:bg-opacity-80 transition-all"}," ⬇️ "),p("button",{onClick:t[5]||(t[5]=(...i)=>o.sharePhoto&&o.sharePhoto(...i)),class:"w-12 h-12 bg-black bg-opacity-60 rounded-full flex items-center justify-center text-white hover:bg-opacity-80 transition-all"}," 🔗 ")])]),p("div",Oc,[p("video",kc,null,512),p("video",Ic,null,512),p("video",Ac,null,512)])])}const Rc=Qe(hc,[["render",Dc]]),Fc={name:"CaptureConfirmation",props:{imageData:{type:Object,default:()=>({})},isIOSDevice:{type:Boolean,default:!1}},emits:["retake","next"],setup(e,{emit:t}){return{basePath:We(()=>"/range_rover_moon_fastival_public/"),onRetake:()=>{console.log("[CaptureConfirmation] retake clicked"),t("retake")},onNext:()=>{console.log("[CaptureConfirmation] next clicked"),t("next")}}},mounted(){var e,t,n,o;console.log("🔍 CaptureConfirmation imageData:",{hasImageData:!!this.imageData,hasOriginal:!!(this.imageData&&this.imageData.originalImageData),hasSegmented:!!(this.imageData&&this.imageData.segmentedImageData),originalLength:(t=(e=this.imageData)==null?void 0:e.originalImageData)==null?void 0:t.length,segmentedLength:(o=(n=this.imageData)==null?void 0:n.segmentedImageData)==null?void 0:o.length,isIOSDevice:this.isIOSDevice})}},Lc={class:"fixed inset-0 z-[50] flex items-end justify-center"},$c=["src"],jc={class:"absolute inset-0 pointer-events-none z-[2]"},Nc=["src"],Bc=["src"],Vc={class:"relative w-full p-6 pb-8 flex justify-between items-center z-[50] pointer-events-auto"};function Hc(e,t,n,o,s,r){return ae(),ge("div",Lc,[n.imageData&&n.imageData.originalImageData?(ae(),ge("img",{key:0,src:n.imageData.originalImageData,class:"absolute inset-0 w-full h-full object-cover z-[1] pointer-events-none",style:{transform:"scaleX(-1)"}},null,8,$c)):je("",!0),p("div",jc,[n.isIOSDevice?(ae(),ge("video",{key:0,ref:"moonVideo",class:"w-full h-full object-contain force-composite",autoplay:"",loop:"",muted:"",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none",background:"transparent"},src:o.basePath+"moon_alpha_ios.mov"},null,8,Nc)):je("",!0)]),n.imageData&&n.imageData.segmentedImageData?(ae(),ge("img",{key:1,src:n.imageData.segmentedImageData,class:"absolute inset-0 w-full h-full object-cover z-[3] pointer-events-none"},null,8,Bc)):je("",!0),t[2]||(t[2]=p("div",{class:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black/80 to-transparent z-[4] pointer-events-none"},null,-1)),p("div",Vc,[p("button",{onClick:t[0]||(t[0]=(...i)=>o.onRetake&&o.onRetake(...i)),class:"px-8 py-3 bg-white text-black rounded-lg font-medium text-lg border border-gray-300 hover:bg-gray-100 transition-colors"}," 再拍一次 > "),p("button",{onClick:t[1]||(t[1]=(...i)=>o.onNext&&o.onNext(...i)),class:"px-8 py-3 bg-white text-black rounded-lg font-medium text-lg border border-gray-300 hover:bg-gray-100 transition-colors"}," 下一步 > ")])])}const Uc=Qe(Fc,[["render",Hc]]),zc="modulepreload",Wc=function(e){return"/range_rover_moon_fastival_public/"+e},ts={},Kc=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Wc(u),u in ts)return;ts[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":zc,h||(g.as="script"),g.crossOrigin="",g.href=u,a&&g.setAttribute("nonce",a),document.head.appendChild(g),h)return new Promise((y,M)=>{g.addEventListener("load",y),g.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};function qc(e){const t=F(!1),n=F(!1),o=F(!1),s=F("custom_moon_bg"),r=F(.5),i=F(3),a=F(.6),u=F(.38);let h=null,f=null,g=null,y=!1;const M=F(0),N=F(0),R=F(!1),re=async _=>{var D;try{const ee=await Kc(()=>import("./segmentationCore-Wv8wG7x5.js"),[]);window.segmentationCore=ee;const fe={onStatus:B=>{if(console.log("📡 收到狀態:",B),B==="TRIGGER_TEST_EFFECT"){console.log("🎯 觸發測試效果 - 呼叫 testMovBackground"),J();return}if(B==="STOP_TEST_EFFECT"){n.value=!1,s.value="original",R.value&&(window.segmentationCore.setEnableSegmentation(!1),window.segmentationCore.setBackgroundType("original")),y&&g&&!g.paused?g.pause():h&&!h.paused&&h.pause(),e.detectionStatus.value="檢測中";return}e.statusText.value=B,e.detectionStatus.value=B},onStats:B=>{M.value=B.faceCount||0,N.value=B.facesInArea||0;const ne=n.value,Le=s.value;B.segmentationEnabled!==void 0&&(n.value=B.segmentationEnabled),B.backgroundType!==void 0&&(s.value=B.backgroundType),B.effectActive!==void 0&&(B.effectActive&&B.backgroundType==="moon_video"?e.detectionStatus.value="🌙 月相模式：已啟用":!B.effectActive&&B.backgroundType==="original"&&(e.detectionStatus.value="檢測中")),(n.value!==ne||s.value!==Le)&&console.log("📊 UI 狀態變化:",{faces:`${B.faceCount}/${B.facesInArea}`,segmentation:`${ne}→${n.value}`,background:`${Le}→${s.value}`,effectActive:B.effectActive})}};h=_.bgMoonVideoEl,f=_.iosMoonVideoEl,g=_.fullscreenMoonEl,y=_.isIOSDevice||!1,console.log("🔧 MediaPipe 初始化:",{hasNormalMoonVideo:!!h,hasIOSMoonVideo:!!f,hasFullscreenMoonVideo:!!g,fullscreenMoonElementType:(D=g==null?void 0:g.constructor)==null?void 0:D.name,fullscreenMoonElementSrc:g==null?void 0:g.src,isIOSDevice:y}),await ee.initCore(_,fe),R.value=!0,ee.setBackgroundType(s.value),n.value=!1,ee.setEnableSegmentation(!1),console.log("🚫 分割功能已禁用，進入預覽模式"),ee.setRecordingProgressCallback&&ee.setRecordingProgressCallback({updateProgress:(B,ne)=>{e.recordingProgress.value={percent:ne>0?B/ne*100:0,current:B,total:ne}},setStatus:B=>{e.progressStatus.value=B}}),console.log("MediaPipe core initialized"),h&&h.load(),f&&y&&(f.load(),console.log("🍎 iOS MOV 影片預載完成"))}catch(ee){console.error("Failed to load MediaPipe core:",ee),e.detectionStatus.value="核心載入失敗"}},W=async()=>{if(R.value){e.detectionStatus.value="啟動中...";try{await window.segmentationCore.start(),t.value=!0,e.detectionStatus.value="檢測中"}catch(_){console.error("Camera start failed:",_),e.detectionStatus.value="啟動失敗";let D="啟動失敗";_.name==="NotAllowedError"||_.message&&_.message.includes("Permission denied")?D="相機權限被拒絕，請在瀏覽器設定中允許相機使用權限，然後重新整理頁面":_.name==="NotFoundError"?D="找不到相機設備":_.name==="NotSupportedError"?D="瀏覽器不支援相機功能":_.message&&_.message.includes("MediaPipe")&&(D="AI 模型載入失敗，請檢查網路連線"),alert(D)}}},G=()=>{R.value&&(window.segmentationCore.stop(),t.value=!1,e.detectionStatus.value="已停止",e.statusText.value="Idle")},K=async()=>{if(!(!R.value||!t.value))try{await window.segmentationCore.switchCamera()}catch(_){console.warn("Switch camera failed:",_)}},$=_=>{n.value=_,R.value&&window.segmentationCore.setEnableSegmentation(_),_||(o.value=!1,Q(!1))},Q=_=>{o.value=_,R.value&&window.segmentationCore.setShowMaskPreview(_)},ue=_=>{s.value=_,R.value&&window.segmentationCore.setBackgroundType(_),(_==="moon_video"||_==="custom_moon_bg")&&(h||f)&&(e.detectionStatus.value="載入月相影片...",y&&f?f.paused&&f.play().then(()=>{e.detectionStatus.value="🍎 iOS 透明月相影片已開始播放",setTimeout(()=>{e.detectionStatus.value="檢測中"},2e3)}).catch(D=>{console.warn("iOS 月相影片播放失敗:",D),e.detectionStatus.value="iOS 月相影片播放失敗"}):h&&h.paused&&h.play().then(()=>{e.detectionStatus.value="月相影片已開始播放",setTimeout(()=>{e.detectionStatus.value="檢測中"},2e3)}).catch(D=>{console.warn("月相影片播放失敗:",D),e.detectionStatus.value="月相影片播放失敗"}))},ve=_=>{r.value=_,R.value&&window.segmentationCore.setBackgroundIntensity(_)},we=_=>{i.value=_,R.value&&window.segmentationCore.setEdgeFeather(_)},Ve=_=>{a.value=_,R.value&&window.segmentationCore.setTemporalAlpha(_)},Oe=_=>{u.value=_,R.value&&window.segmentationCore.setThreshold(_)},Fe=async()=>{var D,ee;if(!R.value||!t.value){alert("請先啟動相機再拍照");return}const _=document.createElement("div");_.className="fixed inset-0 bg-white opacity-80 z-[9999] pointer-events-none animate-photo-flash",document.body.appendChild(_),setTimeout(()=>document.body.removeChild(_),200);try{window.segmentationCore.setEnableSegmentation(!0),await new Promise(ne=>setTimeout(ne,200));const fe=await window.segmentationCore.captureOriginalFrame();let B=null;try{const ne=document.querySelectorAll(".output_canvas");ne.length>0&&(B=ne[0].toDataURL("image/png"))}catch(ne){console.warn("無法獲取分割後畫面，使用原始畫面:",ne),B=fe}console.log("🔍 拍照數據檢查:",{hasOriginal:!!fe,hasSegmented:!!B,originalLength:fe==null?void 0:fe.length,segmentedLength:B==null?void 0:B.length}),window.segmentationCore.setEnableSegmentation(!1),fe?(console.log("📸 進入預覽模式，停止相機和人臉檢測"),t.value=!1,(D=window.segmentationCore)!=null&&D.pause?window.segmentationCore.pause():(ee=window.segmentationCore)!=null&&ee.stop&&window.segmentationCore.stop(),console.log("🔍 準備調用 showCaptureConfirmation:",{hasShowCaptureConfirmationFunction:!!e.showCaptureConfirmation,uiRefsKeys:Object.keys(e)}),e.showCaptureConfirmation?(console.log("📱 調用 showCaptureConfirmation 函數"),e.showCaptureConfirmation({originalImageData:fe,segmentedImageData:B})):console.error("❌ showCaptureConfirmation 函數不存在！"),e.detectionStatus.value="📸 拍照成功！請選擇操作",setTimeout(()=>{e.detectionStatus.value="確認階段"},2e3)):alert("拍照失敗，請重試")}catch(fe){console.error("Capture photo failed:",fe),window.segmentationCore.setEnableSegmentation(!1),alert("拍照失敗，請重試")}},He=()=>{Q(!o.value)},Ue=async()=>{if(!(!R.value||!window.segmentationCore.shareLastRecording))try{const _=await window.segmentationCore.shareLastRecording();console.log("分享結果：",_),_&&_.url?alert("分享成功或已上傳: "+_.url):alert("分享已觸發（系統面板或已完成上傳）")}catch(_){console.error("分享失敗：",_),alert("分享失敗，建議先下載再手動分享")}},I=()=>{if(!R.value||!window.segmentationCore.getLastRecordingUrl)return;const _=window.segmentationCore.getLastRecordingUrl();if(!_){alert("目前沒有可下載的影片");return}const D=document.createElement("a");D.href=_,D.download="",document.body.appendChild(D),D.click(),document.body.removeChild(D),setTimeout(()=>{try{URL.revokeObjectURL(_)}catch{}},1500)},le=()=>{var _;(_=window.segmentationCore)!=null&&_.onResize&&window.segmentationCore.onResize()},J=()=>{var _;if(console.log("🌙 testMovBackground 被觸發"),!R.value){console.warn("⚠️ 核心未載入，無法播放 MOV"),alert("請先啟動相機再測試");return}s.value="person_overlay",n.value=!0,console.log("🔧 檢查核心狀態:",{coreLoaded:R.value,hasSegmentationCore:!!window.segmentationCore,hasSetBackgroundType:!!((_=window.segmentationCore)!=null&&_.setBackgroundType)}),R.value?(window.segmentationCore.setEnableSegmentation(!0),window.segmentationCore.setBackgroundType("person_overlay"),console.log("✅ 人像覆蓋模式已啟用，人像將顯示在月亮影片之上")):console.warn("⚠️ 核心未載入，無法設定人像覆蓋模式"),console.log("📹 檢查 MOV 播放條件:",{isIOSDevice:y,hasIOSMoonVideo:!!f,hasFullscreenMoonVideo:!!g,hasBgMoonVideo:!!h,iosPaused:f==null?void 0:f.paused,fullscreenPaused:g==null?void 0:g.paused,bgPaused:h==null?void 0:h.paused}),y&&g?(console.log("🍎 嘗試播放 iOS 全螢幕月相影片"),g.paused?g.play().then(()=>{console.log("✅ iOS 全螢幕月相影片播放成功"),e.detectionStatus.value="🍎🌙 iOS 透明月相模式：已啟用"}).catch(D=>{console.warn("❌ iOS 全螢幕月相影片播放失敗:",D),e.detectionStatus.value="iOS 影片播放失敗"}):(console.log("ℹ️ iOS 全螢幕月相影片已在播放中"),e.detectionStatus.value="🍎🌙 iOS 透明月相模式：已啟用")):h?(console.log("🌙 嘗試播放月相影片 (非 iOS)"),h.paused?h.play().then(()=>{console.log("✅ 月相影片播放成功"),e.detectionStatus.value="🌙 自定義背景模式：已啟用"}).catch(D=>{console.warn("❌ 月相影片播放失敗:",D),e.detectionStatus.value="影片播放失敗"}):console.log("ℹ️ 月相影片已在播放中")):console.warn("⚠️ 找不到可播放的月相影片元素")};return{cameraRunning:t,segmentationEnabled:n,showMask:o,backgroundType:s,effectIntensity:r,edgeFeather:i,temporalSmooth:a,threshold:u,faceCount:M,facesInArea:N,coreLoaded:R,initMediaPipe:re,startCamera:W,stopCamera:G,switchCamera:K,updateSegmentation:$,updateShowMask:Q,updateBackgroundType:ue,updateEffectIntensity:ve,updateEdgeFeather:we,updateTemporalSmooth:Ve,updateThreshold:Oe,capturePhoto:Fe,toggleMask:He,shareVideo:Ue,downloadVideo:I,handleResize:le,testMovBackground:J}}function Yc(){const e=F({}),t=I=>new Promise(le=>setTimeout(le,I)),n=F(!1),o=F("尚未啟動"),s=F("Idle"),r=F(!1),i=F(""),a=F(!1),u=F({percent:0,current:0,total:8}),h=F("準備錄製..."),f=F(!1),g=F(!1),y=F(null),M=F(!1),N=F(null),R=F([{id:"bg1",name:"月夜景觀",src:"images/pexels-photo-623218.jpeg",frame:"images/bgDefender.png",contentArea:{x:.05,y:.25,width:.9,height:.5},moonScale:1.5},{id:"bg2",name:"景色",src:"images/view.jpg",frame:"images/bgDiscovery.png",contentArea:{x:.05,y:.25,width:.9,height:.5},moonScale:1.5},{id:"bg3",name:"城市",src:"images/images.jpeg",frame:"images/bgRangerover.png",contentArea:{x:.05,y:.25,width:.9,height:.5},moonScale:1.5}]),re=F("bg1"),W=F(!1);return{mobileMenuOpen:n,detectionStatus:o,statusText:s,showLoadingModal:r,loadingMessage:i,showProgressModal:a,recordingProgress:u,progressStatus:h,showProgressControls:f,showCaptureConfirm:g,capturedImageData:y,showPhotoPreview:M,previewImageData:N,availableBackgrounds:R,selectedBackground:re,previewWithSegmentation:W,toggleMobileMenu:()=>{n.value=!n.value,n.value?document.body.classList.add("panel-open"):document.body.classList.remove("panel-open"),setTimeout(()=>{var I;(I=window.segmentationCore)!=null&&I.onResize&&window.segmentationCore.onResize()},260)},closeProgressModal:()=>{a.value=!1},shareFromModal:async()=>{var I;if((I=window.segmentationCore)!=null&&I.shareLastRecording)try{await window.segmentationCore.shareLastRecording()}catch(le){console.error("分享失敗：",le),alert("分享失敗，建議先下載再手動分享")}},downloadFromModal:()=>{var I;if((I=window.segmentationCore)!=null&&I.getLastRecordingUrl){const le=window.segmentationCore.getLastRecordingUrl();if(le){const J=document.createElement("a");J.href=le,J.download="",document.body.appendChild(J),J.click(),document.body.removeChild(J),setTimeout(()=>{try{URL.revokeObjectURL(le)}catch{}},1500)}}},createPhotoFlashEffect:()=>{const I=document.createElement("div");I.className="fixed inset-0 bg-white opacity-80 z-[9999] pointer-events-none animate-photo-flash",document.body.appendChild(I),setTimeout(()=>document.body.removeChild(I),200)},showCaptureConfirmation:I=>{y.value=I,g.value=!0},retakePhoto:async()=>{var le,J;console.log("🔄 開始執行 retakePhoto"),g.value=!1,y.value=null,await Lt(),await t(60);const I=e.value;if(console.log("🔍 檢查 cameraControls:",{hasCameraControls:!!I,hasStartCamera:!!(I!=null&&I.startCamera),hasStopCamera:!!(I!=null&&I.stopCamera),hasUpdateBackgroundType:!!(I!=null&&I.updateBackgroundType),hasUpdateSegmentation:!!(I!=null&&I.updateSegmentation),controlsKeys:I?Object.keys(I):[]}),!(I!=null&&I.startCamera)){console.error("❌ cameraControls 或 startCamera 不存在");return}try{if(I.stopCamera)await Promise.resolve(I.stopCamera());else if(I.stream)try{I.stream.getTracks().forEach(_=>_.stop())}catch{}await t(120),console.log("🎥 正在重新啟動相機..."),await I.startCamera(),(le=I.updateBackgroundType)==null||le.call(I,"custom_moon_bg"),(J=I.updateSegmentation)==null||J.call(I,!1),console.log("✅ 重新啟動相機成功並重設狀態")}catch(_){console.error("❌ 重新啟動相機失敗:",_)}},proceedToPreview:()=>{g.value=!1,N.value=y.value,M.value=!0,y.value=null},showPreview:I=>{N.value=I,M.value=!0},hidePreview:()=>{M.value=!1,N.value=null},selectBackground:I=>{var le;re.value=I,N.value&&((le=window.segmentationCore)!=null&&le.recomposePreview)&&window.segmentationCore.recomposePreview(I)},initKeyboardShortcuts:({startCamera:I,stopCamera:le,switchCamera:J,capturePhoto:_,cameraRunning:D})=>{document.addEventListener("keydown",ee=>{ee.key===" "&&(ee.preventDefault(),D.value?le():I()),ee.key.toLowerCase()==="c"&&D.value&&J(),ee.key.toLowerCase()==="p"&&D.value&&(ee.preventDefault(),_())})},cameraControls:e}}const Gc={name:"App",components:{LandingPage:Hl,AppHeader:Yl,ControlPanel:Fa,CameraStage:Ka,StatusBar:Xa,LoadingModal:nc,ProgressModal:pc,PhotoPreview:Rc,CaptureConfirmation:Uc},setup(){const e=F(!1),t=F(""),n=F(null),o=F(null),s=F(null),r=F(null),i=F(null),a=F(null),u="/range_rover_moon_fastival_public/",f=F((()=>{const oe=navigator.userAgent.toLowerCase(),ze=/iphone|ipad|ipod/.test(oe),Et=/line/.test(oe),Mt=/crios/.test(oe),Tt=/safari/.test(oe)&&!/chrome/.test(oe),$n=new URLSearchParams(window.location.search).get("test-mov")==="1";return console.log("🔍 設備檢測:",{userAgent:oe,isIOS:ze,isLineApp:Et,isChrome:Mt,isSafari:Tt,isTestMode:$n,shouldUseMOV:ze&&(Et||Mt||Tt)||$n}),ze&&(Et||Mt||Tt)||$n})()),g=async oe=>{t.value=oe,e.value=!0,await Lt();try{await x(),E("custom_moon_bg"),w(!1),console.log("✅ 自動啟動相機成功 - 預覽模式")}catch(ze){console.error("❌ 自動啟動失敗:",ze)}},y=oe=>{console.error("🎬 MOV 載入錯誤:",oe.target.error),console.log("🎬 嘗試載入的路徑:",oe.target.src)},M=oe=>{console.log("🎬 MOV 開始載入:",oe.target.src)},N=oe=>{console.log("🎬 MOV 可以播放:",oe.target.src)},{mobileMenuOpen:R,detectionStatus:re,statusText:W,showLoadingModal:G,loadingMessage:K,showProgressModal:$,recordingProgress:Q,progressStatus:ue,showProgressControls:ve,showCaptureConfirm:we,capturedImageData:Ve,showPhotoPreview:Oe,previewImageData:Fe,availableBackgrounds:He,selectedBackground:Ue,toggleMobileMenu:I,closeProgressModal:le,shareFromModal:J,downloadFromModal:_,showCaptureConfirmation:D,retakePhoto:ee,proceedToPreview:fe,showPreview:B,hidePreview:ne,selectBackground:Le,createPhotoFlashEffect:Bt,initKeyboardShortcuts:Pt,cameraControls:S}=Yc(),T=qc({detectionStatus:re,statusText:W,showProgressModal:$,recordingProgress:Q,progressStatus:ue,showProgressControls:ve,showCaptureConfirmation:D}),{cameraRunning:j,segmentationEnabled:U,showMask:O,backgroundType:X,effectIntensity:l,edgeFeather:c,temporalSmooth:d,threshold:m,faceCount:v,facesInArea:b,startCamera:x,stopCamera:P,switchCamera:C,updateSegmentation:w,updateShowMask:A,updateBackgroundType:E,updateEffectIntensity:k,updateEdgeFeather:L,updateTemporalSmooth:V,updateThreshold:q,capturePhoto:Y,toggleMask:pe,shareVideo:de,downloadVideo:ke,initMediaPipe:Ce,handleResize:et,testMovBackground:$e}=T;S.value={startCamera:x,stopCamera:P,updateBackgroundType:E,updateSegmentation:w};const he=async()=>{var ze,Et,Mt,Tt;if(await Lt(),s.value){const vt="/range_rover_moon_fastival_public/";s.value.src=vt+"moon.mp4"}if(r.value&&f.value){const vt="/range_rover_moon_fastival_public/";r.value.src=vt+"moon_alpha_ios.mov",console.log("🍎 iOS設備檢測到，載入透明MOV:",vt+"moon_alpha_ios.mov")}if(Pt({startCamera:x,stopCamera:P,switchCamera:C,capturePhoto:Y,cameraRunning:j}),await Lt(),!a.value){console.warn("⚠️ CameraStage 引用未找到，延遲初始化"),setTimeout(he,200);return}const oe={videoEl:n.value,bgCanvas:(ze=a.value)==null?void 0:ze.bgCanvas,maskCanvas:(Et=a.value)==null?void 0:Et.maskCanvas,outCanvas:(Mt=a.value)==null?void 0:Mt.outputCanvas,bgVideoEl:o.value,bgMoonVideoEl:s.value,iosMoonVideoEl:r.value,fullscreenMoonEl:(Tt=a.value)==null?void 0:Tt.moonVideo,isIOSDevice:f.value};console.log("🔧 Elements 檢查:",{hasVideoEl:!!oe.videoEl,hasBgCanvas:!!oe.bgCanvas,hasMaskCanvas:!!oe.maskCanvas,hasOutCanvas:!!oe.outCanvas,isIOSDevice:oe.isIOSDevice});try{await Ce(oe)}catch(vt){console.error("❌ MediaPipe 初始化失敗:",vt),f.value&&console.log("🍎 iOS 設備：即使 MediaPipe 失敗也將繼續")}window.addEventListener("resize",et),console.log("🎥 自動開啟相機..."),setTimeout(()=>{x()},500)},Se=()=>{e.value&&setTimeout(he,100)};return nn(()=>{hn(e,Se)}),Cn(()=>{window.removeEventListener("resize",et)}),{showCameraApp:e,userName:t,handleStartCamera:g,videoEl:n,bgVideoEl:o,bgMoonVideoEl:s,iosMoonVideoEl:r,fullscreenMoonEl:i,cameraStageRef:a,mobileMenuOpen:R,detectionStatus:re,statusText:W,showLoadingModal:G,loadingMessage:K,showProgressModal:$,recordingProgress:Q,progressStatus:ue,showProgressControls:ve,showCaptureConfirm:we,capturedImageData:Ve,showPhotoPreview:Oe,previewImageData:Fe,availableBackgrounds:He,selectedBackground:Ue,toggleMobileMenu:I,closeProgressModal:le,shareFromModal:J,downloadFromModal:_,showCaptureConfirmation:D,retakePhoto:ee,proceedToPreview:fe,showPreview:B,hidePreview:ne,selectBackground:Le,createPhotoFlashEffect:Bt,cameraRunning:j,segmentationEnabled:U,showMask:O,backgroundType:X,effectIntensity:l,edgeFeather:c,temporalSmooth:d,threshold:m,faceCount:v,facesInArea:b,basePath:u,isIOSDevice:f,startCamera:x,stopCamera:P,switchCamera:C,updateSegmentation:w,updateShowMask:A,updateBackgroundType:E,updateEffectIntensity:k,updateEdgeFeather:L,updateTemporalSmooth:V,updateThreshold:q,capturePhoto:Y,toggleMask:pe,shareVideo:de,downloadVideo:ke,testMovBackground:$e,handleMovError:y,handleMovLoadStart:M,handleMovCanPlay:N}}},Jc={id:"app",class:"min-h-screen bg-app-bg text-app-fg"},Xc={key:1},Zc={class:"grid grid-cols-1 h-screen"},Qc={class:"hidden"},eu={ref:"videoEl",class:"input_video",playsinline:""},tu={ref:"bgVideoEl",class:"bg_video",playsinline:"",muted:"",loop:"",preload:"auto",src:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},nu={ref:"bgMoonVideoEl",class:"bg_video",muted:"",loop:"",preload:"auto",playsinline:"",style:{display:"none"}},ou={ref:"iosMoonVideoEl",class:"bg_video",muted:"",loop:"",preload:"auto",playsinline:"","webkit-playsinline":"",style:{display:"none","pointer-events":"none",background:"transparent"}};function su(e,t,n,o,s,r){const i=wt("LandingPage"),a=wt("CameraStage"),u=wt("StatusBar"),h=wt("LoadingModal"),f=wt("ProgressModal"),g=wt("CaptureConfirmation"),y=wt("PhotoPreview");return ae(),ge("div",Jc,[o.showCameraApp?(ae(),ge("div",Xc,[p("main",Zc,[Ne(a,{ref:"cameraStageRef",class:"relative bg-gray-900 overflow-hidden w-full h-full","background-type":o.backgroundType,"is-i-o-s-device":o.isIOSDevice,"show-controls":!o.showPhotoPreview&&!o.showProgressModal&&!o.showCaptureConfirm,"camera-running":o.cameraRunning,onCapturePhoto:o.capturePhoto,onShareVideo:o.shareVideo,onDownloadVideo:o.downloadVideo},null,8,["background-type","is-i-o-s-device","show-controls","camera-running","onCapturePhoto","onShareVideo","onDownloadVideo"])]),nt(p("div",{class:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm z-40 lg:hidden",onClick:t[0]||(t[0]=(...M)=>o.toggleMobileMenu&&o.toggleMobileMenu(...M))},null,512),[[ut,o.mobileMenuOpen]]),Ne(u,{status:o.statusText},null,8,["status"]),o.showLoadingModal?(ae(),It(h,{key:0,message:o.loadingMessage},null,8,["message"])):je("",!0),o.showProgressModal?(ae(),It(f,{key:1,progress:o.recordingProgress,status:o.progressStatus,"show-controls":o.showProgressControls,onClose:o.closeProgressModal,onShare:o.shareFromModal,onDownload:o.downloadFromModal},null,8,["progress","status","show-controls","onClose","onShare","onDownload"])):je("",!0),o.showCaptureConfirm?(ae(),It(g,{key:2,"image-data":o.capturedImageData,"is-i-o-s-device":o.isIOSDevice,onRetake:o.retakePhoto,onNext:o.proceedToPreview},null,8,["image-data","is-i-o-s-device","onRetake","onNext"])):je("",!0),o.showPhotoPreview?(ae(),It(y,{key:3,"original-image-data":o.previewImageData,"available-backgrounds":o.availableBackgrounds,"selected-background":o.selectedBackground,"user-name":o.userName,onClose:o.hidePreview,onBackgroundChange:o.selectBackground},null,8,["original-image-data","available-backgrounds","selected-background","user-name","onClose","onBackgroundChange"])):je("",!0),p("div",Qc,[p("video",eu,null,512),p("video",tu,null,512),p("video",nu,null,512),p("video",ou,null,512)])])):(ae(),It(i,{key:0,onStartCamera:o.handleStartCamera},null,8,["onStartCamera"]))])}const ru=Qe(Gc,[["render",su]]);Il(ru).mount("#app");
//# sourceMappingURL=index-Dh6NBXU_.js.map
